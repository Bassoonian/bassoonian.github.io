<!DOCTYPE html>
<!-- This website was created from scratch by Iasper over the course of years. Please do not shamelessly steal anything - rather, please get in touch and I'll see if I can help you with anything. Thanks! -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title id="page_title">Carite Dictionary</title>
	<meta name="description" content="A interactive dictionary of Carite, an Indo-European conlang.">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
	<script src="jquery.csv.js"></script>
	<script src="https://kit.fontawesome.com/d0b09f0ca1.js" crossorigin="anonymous"></script>
	<style>
	#actualcontent
	{
		display: none;
	}
	.alphabetstripe
	{
		display: block;
		overflow: hidden;
		white-space: nowrap;
		text-align: center;
	}
	.alphabetstripe > span
	{
		position: relative;
		display: inline-block;
	}
	.alphabetstripe > span:after, .alphabetstripe > span:before
	{
		content: "";
		position: absolute;
		top: 50%;
		width: 9999px;
		height: 1px;
		background: #ccc;
	}
	.alphabetstripe > span:after
	{
		left: 100%;
		margin-left: 5px;
	}
	.alphabetstripe > span:before
	{
		right: 100%;
		margin-right: 5px;
	}
	.wordentry
	{
		padding: 1px;
		margin: 1px;
		cursor: pointer;
		-o-transition: color .2s ease-out, background .1s ease-out;
		-ms-transition: color .2s ease-out, background .1s ease-out;
		-moz-transition: color .2s ease-out, background .1s ease-out;
		-webkit-transition: color .2s ease-out, background .1s ease-out;
		transition: color .2s ease-out, background .1s ease-out;
	}
	.wordentry:hover
	{
		background-color: #E8E8E8;
	}
	.clickety, .nav-link
	{
		cursor: pointer;
	}
	#entryamountbox
	{
		text-align: center;
		padding-top: 1px;
		padding-bottom: 0px;
		margin-bottom: 0px;
	}
	.img_src_inline
	{
		width: 1em;
		height: 1em;
	}
	.rtl
	{
		display: inline-block;
		transform: scaleX(-1); 
		filter: FlipH; /* IE 6-7-8 */
		direction: rtl;
		unicode-bidi: bidi-override;
	}
	.glosstext
	{
		font-variant: small-caps;
	}
	.hovertext, .glosstext
	{
		text-decoration-line: underline;
		text-decoration-style: dotted;
		cursor: help;
	}
	
	.bd-navbar
	{
		min-height: 4rem;
		box-shadow: 0 .5rem 1rem rgba(0, 0, 0, .05), inset 0 -1px 0 rgba(0, 0, 0, .1);
		background-color: #563d7c;
	}
	.bd-sidebar
	{
		-ms-flex-order: 0;
		order: 0;
		border-bottom: 1px solid rgba(0, 0, 0, .1);
	}
	.bd-search
	{
		position: relative;
		padding: 1rem 15px;
		margin-right: -15px;
		margin-left: -15px;
		border-bottom: 1px solid rgba(0, 0, 0, .05);
	}
	.bd-search :focus
	{
		border-color: "#7952b3";
		box-shadow: 0 0 0 3px rgba(121, 82, 179, .25);
	}
	.bd-search-docs-toggle
	{
		line-height: 1;
		color: #212529;
	}
	.bd-links
	{
	    padding-top: 1rem;
	    padding-bottom: 1rem;
	    margin-right: -15px;
	    margin-left: -15px;
	}
	.bd-content
	{
	    -ms-flex-order: 1;
	    order: 1;
	}
	th
	{
		text-align: center;
	}
	
	/*Navbar media*/
	@media (max-width:991.98px){
		.bd-navbar
		{
			padding-right: .5rem;
			padding-left: .5rem;
		}
	}
	
	@media (min-width:768px){
	    @supports ((position:-webkit-sticky) or (position:sticky)){
	        .bd-navbar
			{
	            position: -webkit-sticky;
	            position: sticky;
	            top: 0;
	            z-index: 1071;
	        }
		}
	}
	
	/*Sidebar media*/
	@media (min-width:768px){
	    .bd-sidebar
		{
	        border-right: 1px solid rgba(0, 0, 0, .1)
	    }
	    @supports ((position:-webkit-sticky) or (position:sticky)){
	        .bd-sidebar
			{
	            position: -webkit-sticky;
	            position: sticky;
	            top: 4rem;
	            z-index: 1000;
	            height: calc(100vh - 4rem);
	        }
		}
	}
	@media (min-width:1200px){
	    .bd-sidebar
		{
	        -ms-flex: 0 1 320px;
	        flex: 0 1 320px;
	    }
	}
	
	/*Links media*/
	@media (min-width:768px){
	    @supports ((position:-webkit-sticky) or (position:sticky)){
	        .bd-links
			{
	            max-height: calc(100vh - 9rem);
	            overflow-y: auto
	        }
		}
	}
	@media (min-width:768px){
	    .bd-links
		{
	        display: block !important;
	    }
	}
	
	/*DOC STUFF*/
	.DOC_bd-sidebar {
	    -ms-flex-order: 0;
	    order: 0;
	    border-bottom:1px solid rgba(0, 0, 0, .1)
	}
	@media (min-width: 768px) {
	    .DOC_bd-sidebar {
	        border-right:1px solid rgba(0, 0, 0, .1)
	    }

	    @supports ((position: -webkit-sticky) or(position: sticky)) {
	        .DOC_bd-sidebar {
	            position: -webkit-sticky;
	            position: sticky;
	            top: 4rem;
	            z-index: 1000;
	            height:calc(100vh - 4rem)
	        }
	    }
	}
	@media (min-width: 1200px) {
	    .DOC_bd-sidebar {
	        -ms-flex: 0 1 320px;
	        flex:0 1 320px
	    }
	}
	.DOC_bd-sidebar .nav > li > a {
	    display: block;
	    padding: .25rem 1.5rem;
	    font-size: 90%;
	    color:rgba(0, 0, 0, .65)
	}
	.DOC_bd-sidebar .nav > li > a:hover {
	    color: rgba(0, 0, 0, .85);
	    text-decoration: none;
	    background-color:transparent
	}
	.DOC_bd-sidebar .nav > .active:hover > a, .DOC_bd-sidebar .nav > .active > a {
	    font-weight: 600;
	    color: rgba(0, 0, 0, .85);
	    background-color:transparent
	}
	.DOC_bd-links {
	    padding-top: 1rem;
	    padding-bottom: 1rem;
	    margin-right: -15px;
	    margin-left:-15px
	}
	@media (min-width: 768px) {
	    @supports ((position: -webkit-sticky) or(position: sticky)) {
	        .DOC_bd-links {
	            max-height: calc(100vh); /* - 9rem*/
	            overflow-y:auto
	        }
	    }
	}
	@media (min-width: 768px) {
	    .DOC_bd-links {
	        display:block !important
	    }
	}
	.DOC_bd-toc-item.active {
	    margin-bottom:1rem
	}
	.DOC_bd-toc-item.active:not(:first-child) {
	    margin-top:1rem
	}
	.DOC_bd-toc-item.active > .DOC_bd-toc-link {
	    color:rgba(0, 0, 0, .85)
	}
	.DOC_bd-toc-item.active > .DOC_bd-toc-link:hover {
	    background-color:transparent
	}
	.DOC_bd-toc-item.active > .DOC_bd-sidenav {
	    display:block
	}
	.DOC_bd-toc-link {
	    display: block;
	    padding: .25rem 1.5rem;
	    font-weight: 600;
	    color:rgba(0, 0, 0, .65)
	}
	.DOC_bd-toc-link:hover {
	    color: rgba(0, 0, 0, .85);
	    text-decoration:none
	}
	/*.DOC_bd-sidenav {
	    display:none
	}*/
	.DOC_bd-toc {
	    -ms-flex-order: 2;
	    order: 2;
	    padding-top: 1.5rem;
	    padding-bottom: 1.5rem;
	    font-size:.875rem
	}
	@supports ((position: -webkit-sticky) or(position: sticky)) {
	    .DOC_bd-toc {
	        position: -webkit-sticky;
	        position: sticky;
	        top: 4rem;
	        height: calc(100vh - 4rem);
	        overflow-y:auto
	    }
	}
	.DOC_section-nav ul {
	    padding-left:1rem
	}
	.DOC_section-nav {
	    padding-left: 0;
	    border-left:1px solid #eee
	}
	.DOC_toc-entry {
	    display:block
	}
	.DOC_toc-entry a {
	    display: block;
	    padding: .125rem 1.5rem;
	    color:#77757a
	}
	.DOC_toc-entry a:hover {
	    color: #007bff;
	    text-decoration:none
	}
	.DOC_bd-content {
	    -ms-flex-order: 1;
	    order:1
	}
  	</style>
</head>
<body>
	<header class="navbar navbar-expand navbar-dark bg-dark flex-column flex-md-row bd-navbar">
		<a class="navbar-brand mr-0 mr-md-2" id="lang_name">Loading...</a>
		<div class="navbar nav-scroll">
			<ul class="navbar-nav bd-navbar-nav flex-row">
				<li class="nav-item">
					<a class="nav-link" onclick="switch_tab(0);">Lexicon</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" onclick="switch_tab(1);">Documentation</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" onclick="switch_tab(4);">Bibliography</a>
				</li>
			</ul>
		</div>
		<div class="navbar-collapse collapse">
	  		<ul class="navbar-nav ml-auto d-none" id="navbar_alphabetlist"></ul> <!-- add d-xl-flex to reenable-->
			<button class="btn ml-auto btn-outline-secondary my-2 my-sm-0" data-toggle="modal" data-target="#searchsettingsmodal">
				<i class="fas fa-cog"></i>
			</button>
	  	</div>
	</header>   
<div class="container-fluid" id="head_container_lexicon">
	<div class="row flex-xl-nowrap">
		<div class="col-md-3 col-xl-2 bd-sidebar">
	    	<form class="bd-search d-flex align-items-center" role="search">
				<span style="position: relative; display: inline-block; direction: ltr; width: 100%;">
	      			<input class="form-control mr-sm-2 ds-input" type="search" placeholder="Search..." aria-label="Search" id="searchinputvalue" oninput="setWordlist();" spellcheck="false" role="combobox" dir="auto" style="position: relative; vertical-align: top;">
				</span>
				<button aria-controls="wordlist" aria-expanded="false" aria-label="Toggle word list" class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3" data-target="#wordlist" data-toggle="collapse" type="button">
					<svg focusable="false" height="30" role="img" viewBox="0 0 30 30" width="30" xmlns="http://www.w3.org/2000/svg">
						<title>Menu</title>
						<path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path>
					</svg>
				</button>
	    	</form>
			<div id="wordlist" class="collapse bd-links" data-spy="scroll" data-target=".navbar" data-offset="0" aria-label="Main navigation"></div>
		</div>
	<main class="col-md-9 col-xl-10 py-md-3 bd-content" role="main">
		<div id="loadingcontent" class="container-fluid">Loading...</div>
		<div id="actualcontent" data-spy="affix" class="container-fluid">
			<div class="alert alert-info alert-dismissable fade show" role="alert" id="wotdnotice">
				<strong>Notice:</strong> This entry was opened automatically as the word of the day.
				<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			</div>
			<h2 id="entry_name"></h2>
			<h3 id="entry_category"></h3>
			<ul class="nav nav-tabs" role="tablist" id="wordTabs">
				<li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#tab_general" id="tab_click_general" role="tab" aria-selected="true" aria-controls="tab_general">General</a></li>
				<li class="nav-item" id="tab_inflect_li"><a class="nav-link" data-toggle="tab" href="#tab_inflection" id="tab_click_inflection" role="tab" aria-selected="false" aria-controls="tab_inflection">Inflection</a></li>
				<li class="nav-item"><a class="nav-link" data-toggle="tab" href="#tab_etymo" id="tab_click_etymo" role="tab" aria-selected="false" aria-controls="tab_etymo">Etymology</a></li>
				<li class="nav-item"><a class="nav-link" data-toggle="tab" href="#tab_sources" id="tab_click_sources" role="tab" aria-selected="false" aria-controls="tab_sources">Sources</a></li>
			</ul>
			<div class="tab-content">
				<div id="tab_general" class="tab-pane fade show active" role="tabpanel" aria-labelledby="tab_click_general">
					<h4>Pronunciation</h4>
					<ul id="entry_pronunciation"></ul>
					<p id="dicentry_gender"><b>Gender:</b> <span id="dicentry_gender2"></span></p>
					<h4>Translation</h4>
					<ol id="entry_translations"></ol>
					<div id="synonyms_tab">
						<h4>Synonyms</h4>
						<ol id="synonym_list"></ol>
					</div>
					<p>Last edited: <span id="word_last_edited_span"></span></p>
				</div>
				<div id="tab_inflection" class="tab-pane fade" role="tabpanel" aria-labelledby="tab_click_inflection">
					<h4>Inflection</h4>
					<div id="inflection_content" class="table-responsive"></div>
				</div>
				<div id="tab_etymo" class="tab-pane fade" role="tabpanel" aria-labelledby="tab_click_etymo">
					<h4>Etymology</h4>
					<p id="entry_etymologytext"></p>
					<div id="etymo_relatedwords">
						<h4>Related terms</h4><ul id="etymo_relatedtermslist"></ul>
					</div>
				</div>
				<div id="tab_sources" class="tab-pane fade" role="tabpanel" aria-labelledby="tab_click_sources">
					<!-- <div class="alert alert-warning" role="alert" id="libertyalert">
						<strong>Notice:</strong> This entry was added as part of artistic liberty and is as such irrelevant to any actual scientific research.
					</div> -->
					<h4>Sources</h4>
					<p id="entry_sourcetext"></p>
				</div>
			</div>
		</main>
	</div>
</div>
<div class="container-fluid" id="head_container_docu" style="display: none;">
	<div class="row flex-xl-nowrap">
		<div class="col-md-3 col-xl-2 DOC_bd-sidebar">
			<nav class="collapse DOC_bd-links" id="DOC_bd-docs-nav" aria-label="Documentation navigation">
				<div class="DOC_bd-toc-item">
					<a class="DOC_bd-toc-link">Introduction</a>
				</div>
				<div class="DOC_bd-toc-item active">
					<a class="DOC_bd-toc-link">Anthropology</a>
					<ul class="nav DOC_bd-sidenav">
						<li class="active DOC_bd-sidenav-active"><a>History</a></li>
						<li><a>Mythology</a></li>
					</ul>
				</div>
				<div class="DOC_bd-toc-item">
					<a class="DOC_bd-toc-link">Language</a>
					<ul class="nav DOC_bd-sidenav" id="DOC_sidenav_langlist"></ul>
				</div>
			</nav>
		</div>
		<nav class="d-none d-xl-block col-xl-2 DOC_bd-toc" aria-label="Secondary documentation navigation">
			<ul class="DOC_section-nav" id="doc_quick_navigation">
				Loading...
			</ul>
		</nav>
		<main class="col-md-9 col-xl-8 py-md-3 pl-md-5 DOC_bd-content" id="doc_main_content">
			Loading...
		</main>
	</div>
</div>
<div class="container-fluid" id="head_container_bib" style="display: none;">
	<h1>Bibliography</h1>
	<p>Below, you may find the full bibliography of this project, sorted alphabetically by author. Clicking any of the icons following a source links you to the relevant entry of that source on the mentioned website. For a more in-depth reference including page numbers, please refer to the individual entries.</p>
	<ol id="bibliography_ollist"></ol>
	<p>Additionally, the following sources have been flagged as potentially useful in the future but have not (yet) contributed to the project:</p>
	<ol id="bibliography_ollist2"></ol>
</div>
<div class="modal fade" id="searchsettingsmodal" role="dialog">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">Lexicon Settings</h4>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			</div>
			<div class="modal-body">
				<h4>Dictionary Settings</h4>
				<p>Active stage: <select id="stageselectlist" onchange="updateStage();">
					</select>
				</p>
				<p>Pronunciation notation:
					<input type="radio" name="use_xsampa" value="ipa" checked> IPA
					<input type="radio" name="use_xsampa" value="xsampa"> X-SAMPA
				</p>
				<h4>Search Settings</h4>
				<p>Search bar purpose:
					<input type="radio" name="search_destination" value="lang" checked onchange="cleanSearch();"> Language
					<input type="radio" name="search_destination" value="eng" onchange="cleanSearch();"> Translations
				</p>
				<p>Sort order:
					<input type="radio" name="lex_order" value="alph" checked onchange="refreshOrder();"> Alphabetically
					<input type="radio" name="lex_order" value="time" onchange="refreshOrder();"> By last edited
				</p>
				<h4>Other</h4>
				<p>Last framework update: <span id="lastdocupdate"></span></p>
				<p>Last lexicon update: <span id="lastlexupdate"></span></p>
				<table class="table">
					<thead>
						<tr>
							<th><i class="fab fa-discord" alt="Discord" title="Discord"></i> Jasper#5206</th>
							<th><i class="fab fa-reddit" alt="Reddit" title="Reddit"></i> /u/Iasper</th>
						</tr>
					</thead>
				</table>
			</div>
		</div>
	</div>
</div>
</body>
<script>
	//Initialise important variables
	_alphabet=[
		"Œë Œí Œì Œî Œï Œñ Œó Œô Œö Œõ Œú Œù Œü Œ† Œ° Œ£ Œ§ Œ•~Y œú Œ¶ Œß Œ® Œ©",
		"A~ƒÄ~ƒÑ~ƒÑÃÑ B D E~ƒí~ƒò~ƒòÃÑ F G H I~ƒ™~ƒÆ~ƒÆÃÑ J K L M N O~≈å~«™~«™ÃÑ P R S T U~≈™~≈≤~≈≤ÃÑ V W Y~»≤~YÃ®~YÃ®ÃÑ √ò~√òÃÑ~√òÃ®~√òÃ®ÃÑ",
		"A~ƒÄ B D E~ƒí~ƒò~ƒòÃÑ F G H I~ƒ™ J K L M N O~≈å~«™~«™ÃÑ P R~≈ò S T U~≈™~≈≤~≈≤ÃÑ V W Y~»≤ √Ü~√ÜÃÑ √ò~√òÃÑ",
		"A~ƒÄ B C D E~ƒí F G H I~ƒ™ L M N O~≈å P R S T U~≈™ V Y~»≤ Z √Ü~√ÜÃÑ √ò~√òÃÑ"];
	_needsromanisation=[true,false,false,false];
	
	//"normal alphabet1" A~ƒÄ B D E~ƒí F G H I~ƒ™ J K L M N O~≈å P R S T U~≈™ V W »≤ Z √ò
	//_alphabet2=["Œë Œí Œì Œî Œï Œñ Œó Œô Œö Œõ Œú Œù Œü Œ† Œ° Œ£ Œ§ Œ•~Y œú Œ¶ Œß Œ® Œ©","","",""];
	//_alphabet2=["êåÄ êåÅ êåÉ êåÑ êåÖ êåÇ êåá êåâ êåä êåã êåå êåç êåè êåê êåì êåî êåï êåñ êåÜ êåó","","",""];
	activestage=_alphabet.length-1;
	includeother=true;
	inbibliography=false;
	searchenglish=false;
	_has_rendered_bibliography=false;
	orderalph=true;
	usexsampa=false;
	sources=[
		["ed_greek",
			"Beekes, Robert. <i>Etymological Dictionary of Greek.</i> Leiden, Koninklijke Brill NV, 2010",[
				["google",		"https://books.google.be/books?id=4qudQAAACAAJ"],
				["worldcat",	"https://www.worldcat.org/title/etymological-dictionary-of-greek/oclc/587850973"]
			]],
		["originsnominal",
			"Beekes, R. S. P. <i>The origins of the Indo-European nominal inflection.</i> Innsbruck, Institut f√ºr Sprachwissenschaft der Universit√§t Innsbruck, 1985",[
				["google",		"https://books.google.be/books?id=83hjAAAAMAAJ"],
				["worldcat",	"https://www.worldcat.org/title/origins-of-the-indo-european-nominal-inflection/oclc/1015088980"]
			]],
		["etruscan_intro",
			"Bonfante, Giuliano & Bonfante, Larissa. <i>The Etruscan Language: An Introduction, 2nd ed.</i> Manchester, Manchester University Press, 2002",[
				["google",		"https://books.google.be/books?id=VWGN6e5Rzf8C"],
				["worldcat",	"https://www.worldcat.org/title/etruscan-language-an-introduction/oclc/475129395"]
			]],
		["ed_iranian",
			"Cheung, Johnny. <i>Etymological Dictionary of the Iranian Verb.</i> Leiden, Koninklijke Brill NV, 2007",[
				["google",		"https://books.google.be/books?id=lPhjAAAAMAAJ"],
				["worldcat",	"https://www.worldcat.org/title/etymological-dictionary-of-the-iranian-verb/oclc/860423476"]
			]],
		["dic_gaulish",
			"Delamarre, Xavier. <i>Dictionnaire de la langue gauloise : une approche linguistique du vieux-celtique continental.</i> Paris, Editions Errance, 2003",[
				["google",		"https://books.google.be/books?id=i0QcAQAAIAAJ"],
				["worldcat",	"https://www.worldcat.org/title/dictionnaire-de-la-langue-gauloise-une-approche-linguistique-du-vieux-celtique-continental/oclc/1038048625"]
			]],
		["ed_baltic",
			"Derksen, Rick. <i>Etymological Dictionary of the Baltic Inherited Lexicon.</i> Leiden, Koninklijke Brill NV, 2015",[
				["google",		"https://books.google.be/books?id=fILunwEACAAJ"],
				["worldcat",	"https://www.worldcat.org/title/etymological-dictionary-of-the-baltic-inherited-lexicon/oclc/932186673"]
			]],
		["ed_slavic",
			"Derksen, Rick. <i>Etymological Dictionary of the Slavic Inherited Lexicon.</i> Leiden, Koninklijke Brill NV, 2008",[
				["google",		"https://books.google.be/books?id=LJFiAAAAMAAJ"],
				["worldcat",	"https://www.worldcat.org/title/etymological-dictionary-of-the-slavic-inherited-lexicon/oclc/606382920"]
			]],
		["ed_latin",
			"de Vaan, Michiel. <i>Etymological Dictionary of Latin and the other Italic Languages.</i> Leiden, Koninklijke Brill NV, 2008",[
				["google",		"https://books.google.be/books?id=ecZ1DwAAQBAJ"],
				["worldcat",	"https://www.worldcat.org/title/etymological-dictionary-of-latin-and-the-other-italic-languages/oclc/962020667"]
			]],
		["academia_nymph",
			"Hyllested, Adam. <i>The Water Spirit: Greek ŒΩ·ΩêŒºœÜŒ∑, Sanskrit R√°mbhƒÅ, Lithuanian L√£umƒó and Some Other Possibly Related Forms.</i> Copenhagen, 2004",[
				["academia",	"https://www.academia.edu/1429587/The_Water_Spirit_Greek_n%C3%BDmph%C4%93_Sanskrit_R%C3%A1mbh%C4%81_Lithuanian_L%C3%A3um%C4%97_amd_Some_Other_Possibly_Related_Forms"]
			]],
		["ielangcult",
			"Fortson IV, Benjamin W. <i>Indo-European Language and Culture: An Introduction.</i> Malden/Oxford/Carlton, Blackwell Publishing Ltd, 2004",[
				["google",		"https://books.google.be/books?id=bSxHgej4tKMC"],
				["worldcat",	"https://www.worldcat.org/title/indo-european-language-and-culture-an-introduction/oclc/778339290"]
			]],
		["pie_handbook",
			"Klein, Jared et al. <i>Handbook of Comparative and Historical Indo-European Linguistics.</i> Berlin/Boston, Walter de Gruyter GmbH, 2017",[
				["google",		"https://books.google.be/books?id=QgA3DwAAQBAJ"],
				["google",		"https://books.google.be/books?id=TVFKDwAAQBAJ"],
				["google",		"https://books.google.be/books?id=SuR8DwAAQBAJ"],
				["worldcat",	"https://www.worldcat.org/title/handbook-of-comparative-and-historical-indo-european-linguistics-an-international-handbook/oclc/1051139391"]
			]],
		["ed_hittite",
			"Kloekhorst, Alwin. <i>Etymological Dictionary of the Hittite Inherited Lexicon.</i> Leiden/Bosten, Koninklijke Brill NV, 2008",[
				["google",		"https://books.google.be/books?id=JmdiAAAAMAAJ"],
				["worldcat",	"https://www.worldcat.org/title/etymological-dictionary-of-the-hittite-inherited-lexicon/oclc/781175802"]
			]],
		["dic_punic",
			"Krahmalkov, Charles R. <i>Phoenician-Punic Dictionary.</i> Leuven, Peeters, 2000",[
				["google",		"https://books.google.be/books?id=bh_jdzIT9GQC"],
				["worldcat",	"https://www.worldcat.org/title/phoenician-punic-dictionary/oclc/860453014"]
			]],
		["ed_germanic",
			"Kroonen, Guus. <i>Etymological Dictionary of Proto-Germanic.</i> Leiden, Koninklijke Brill NV, 2013",[
				["google",		"https://books.google.be/books?id=cgmFRAAACAAJ"],
				["worldcat",	"https://www.worldcat.org/title/etymological-dictionary-of-proto-germanic/oclc/851754510"]
			]],
		["ed_gothic",
			"Lehmann, Winfred P. <i>A Gothic Etymological Dictionary.</i> Leiden, E.J. Brill, 1986",[
				["google",		"https://books.google.be/books?id=39UUAAAAIAAJ"],
				["worldcat",	"https://www.worldcat.org/title/gothic-etymological-dictionary/oclc/797186062"]
			]],
		["dic_egyptian",
			"Lesko, Leonard H. <i>A dictionary of Late Egyptian, 2nd ed., 2 vols.</i> Providence, B.C. Scribe Publications, 2002 and 2004",[
				["google",		"https://books.google.be/books?id=8GAqAQAAIAAJ"],
				["worldcat",	"https://www.worldcat.org/title/dictionary-of-late-egyptian-1/oclc/634365751"]
			]],
		["contel_calendar",
			"Le Contel, Jean-Michel & Verdier, Paul. <i>Un calendrier celtique : le calendrier gaulois de Coligny.</i> Paris, Editions Errance, 1997",[
				["google",		"https://books.google.be/books?id=H1pmAAAAMAAJ"],
				["worldcat",	"https://www.worldcat.org/title/calendrier-celtique-le-calendrier-gaulois-de-coligny/oclc/245807086"]
			]],
		["intro_egyptian",
			"Loprieno, Antonio. <i>Ancient Egyptian: A Linguistic Introduction.</i> Cambridge, Cambridge University Press, 1995",[
				["google",		"https://books.google.be/books?id=kW8Mzji0XRgC"],
				["worldcat",	"https://www.worldcat.org/title/ancient-egyptian-a-linguistic-introduction/oclc/896426228"]
			]],
		["macneill_calendar",
			"Mac Neill, E√≥in. <i>On the Notation and Chronography of the Calendar of Coligny.</i> 1926",[
				["jstor",		"https://www.jstor.org/stable/30007818"],
				["google",		"https://books.google.be/books?id=QFdAHAAACAAJ"],
				["worldcat",	"https://www.worldcat.org/title/on-the-notation-and-chronography-of-the-calendar-of-coligny/oclc/41962970&referer=brief_results"]
			]],
		["insearchof",
			"Mallory, J. P. <i>In Search of the Indo-Europeans: Language, Archeology and Myth.</i> Thames and Hudson, 1989",[
				["google",		"https://books.google.be/books?id=wLeYkgEACAAJ"]
			]],
		["oxf_intro",
			"Mallory, J. P. & Adams, D. Q. <i>The Oxford Introduction to Proto-Indo-European and the Proto-Indo-European World.</i> New York, Oxford University Press Inc., 2006",[
				["google",		"https://books.google.be/books?id=lzilBQAAQBAJ"],
				["worldcat",	"https://www.worldcat.org/title/oxford-introduction-to-proto-indo-european-and-the-proto-indo-european-world/oclc/901737820"]
			]],
		["ed_armenian",
			"Martirosyan, Hrach K. <i>Etymological Dictionary of the Armenian Inherited Lexicon.</i> Leiden, Koninklijke Brill, 2010",[
				["google",		"https://books.google.be/books?id=340lAQAAMAAJ"],
				["worldcat",	"https://www.worldcat.org/title/etymological-dictionary-of-the-armenian-inherited-lexicon/oclc/742434857"]
			]],
		["sketch_albanian",
			"Matasoviƒá, Ranko. <i>A Grammatical Sketch of Albanian for Students of Indo-European.</i> Zagreb, 2018",[
				["academia",	"https://www.academia.edu/37749523/_2018_RANKO_MATASOVI%C4%86_A_Grammatical_Sketch_of_Albanian_for_Students_of_Indo-European"]
			]],
		["sketch_armenian",
			"Matasoviƒá, Ranko. <i>A Grammatical Sketch of Classical Armenian.</i> Zagreb, 2009",[
				["academia",	"https://www.academia.edu/1748235/An_Introduction_to_Classical_Armenian"]
			]],
		["ed_celtic",
			"Matasoviƒá, Ranko. <i>Etymological Dictionary of Proto-Celtic.</i> Leiden, Koninklijke Brill NV, 2009",[
				["google",		"https://books.google.be/books?id=YN_YPQAACAAJ"],
				["worldcat",	"https://www.worldcat.org/title/etymological-dictionary-of-proto-celtic/oclc/262430534"]
			]],
		["ed_celtic_rev",
			"Matasoviƒá, Ranko. <i>Addenda et corrigenda to Ranko MatasovicÃÅ's Etymological Dictionary of Proto-Celtic (Brill, Leiden 2009).</i> Zagreb, 2011",[
				["academia",	"https://www.academia.edu/1489376/Addenda_et_Corrigenda_to_Etymological_Dictionary_of_Proto-Celtic_Brill_Leiden_2009_"]
			]],
		["ed_albanian",
			"Orel, Vladimir. <i>Albanian Etymological Dictionary.</i> Leiden/Boston/K√∂ln, 1998",[
				["google",		"https://books.google.be/books?id=yJQYAQAAIAAJ"],
				["worldcat",	"https://www.worldcat.org/title/albanian-etymological-dictionary/oclc/466999284"]
			]],
		["albanian_grammar",
			"Orel, Vladimir. <i>A concise historical grammar of the Albanian language: reconstruction of Proto-Albanian.</i> Leiden/Boston/K√∂ln, 2000",[
				["google",		"https://books.google.be/books?id=xvKH56aT5mEC"],
				["worldcat",	"https://www.worldcat.org/title/a-concise-historical-grammar-of-the-albanian-language-reconstruction-of-proto-albanian/oclc/704530164"]
			]],
		["spanhist",
			"Penny, Ralph. <i>A History of the Spanish Language.</i> Cambridge, Cambridge University Press, 2002",[
				["google",		"https://books.google.be/books?id=ZjcrhyQlFa0C"],
				["worldcat",	"https://www.worldcat.org/title/history-of-the-spanish-language/oclc/633641168"]
			]],
		["pie_to_pgmc",
			"Ringe, Don. <i>From Proto-Indo-European to Proto-Germanic.</i> Oxford, Oxford University Press, 2009",[
				["google",		"https://books.google.be/books?id=ymcm0Lt9sR0C"],
				["worldcat",	"https://www.worldcat.org/title/from-proto-indo-european-to-proto-germanic/oclc/929323754"]
			]],
		["etruscan_rix",
			"Rix, Helmut. <i>Etruscan.</i> In: <i>Woodard, Roger D. The Ancient Languages of Europe.</i> Cambridge, Cambridge University Press, 2010",[
				["google",		"https://books.google.be/books?id=aPEENAEp938C"],
				["worldcat",	"https://www.worldcat.org/title/ancient-languages-of-europe/oclc/706988654"]
			]],
		["liv",
			"Rix, Helmut. <i>LIV, Lexikon der Indogermanischen Verben: die Wurzeln und ihre Prim√§rstammbildungen.</i> Wiesbaden, Dr. Ludwig Reichert Verlag, 2001",[
				["google",		"https://books.google.be/books?id=WHYPOgAACAAJ"],
				["worldcat",	"https://www.worldcat.org/title/lexikon-der-indogermanischen-verben-liv-die-wurzeln-und-ihre-primrstammbildungen/oclc/1014630824"]
			]],
		["absoluteconstructions",
			"Ruppel, Antonia. <i>Absolute Constructions in Early Indo-European.</i> New York, Cambridge University Press, 2013",[
				["google",		"https://books.google.be/books?id=MGmCI3h0_tEC"],
				["worldcat",	"https://www.worldcat.org/title/absolute-constructions-in-early-indo-european/oclc/1055608191"]
			]],
		["ieverbmorpho",
			"Shields, Kenneth C. <i>A History of Indo-European Verb Morphology.</i> In: <i>Current Issues in Linguistic Theory.</i> Amsterdam/Philadelphia, John Benjamins Publishing Company, 1992",[
				["google",		"https://books.google.be/books?id=leNBAAAAQBAJ"],
				["worldcat",	"https://www.worldcat.org/title/history-of-indo-european-verb-morphology/oclc/802746544"]
			]],
		["compgrammar",
			"Sihler, Andrew L. <i>New Comparative Grammar of Latin and Greek.</i> New York/Oxford, Oxford University Press, 1995",[
				["google",		"https://books.google.be/books?id=tJh15AcIdLgC"],
				["worldcat",	"https://www.worldcat.org/title/new-comparative-grammar-of-greek-and-latin/oclc/860485555"]
			]],
		["ed_basque",
			"Trask, R. L. <i>Etymological Dictionary of Basque.</i> Sussex, University of Sussex, 2008",[
				["worldcat",	"https://www.worldcat.org/title/etymological-dictionary-of-basque/oclc/971735884"]
			]],
		["lat_vulg",
			"V√§√§n√§nen, Veikko. <i>Introduction au latin vulgaire.</i> Klincksieck, 2006",[
				["google",		"https://books.google.be/books?id=vATEmAEACAAJ"],
				["worldcat",	"https://www.worldcat.org/title/introduction-au-latin-vulgaire/oclc/889929195"]
			]],
		["ed_coptic",
			"Vycichl, Werner. <i>Dictionnaire √©tymologique de la langue copte.</i> Leuven, √âditions Peeters, 1983",[
				["google",		"https://books.google.be/books?id=C80XAQAAIAAJ"],
				["worldcat",	"https://www.worldcat.org/title/dictionnaire-etymologique-de-la-langue-copte/oclc/995613647"]
			]],
		["manual_etruscan",
			"Wallace, Rex E. <i>Zikh Rasna: A Manual of the Etruscan Language and Inscriptions.</i> Ann Arbor/New York, Beech Stave Press, 2008",[
				["google",		"https://books.google.be/books?id=KH7pNwAACAAJ"],
				["worldcat",	"https://www.worldcat.org/title/zikh-rasna-a-manual-of-the-etruscan-language-and-inscriptions/oclc/233283707"]
			]],
		["howtokilladragon",
			"Watkins, Calvert. <i>How to kill a dragon: aspects of Indo-European poetics.</i> New York, Oxford University Press, 1995",[
				["google",		"https://books.google.be/books?id=Ri4sbTiMKN4C"],
				["worldcat",	"https://www.worldcat.org/title/how-to-kill-a-dragon-aspects-of-indo-european-poetics/oclc/185513104"]
			]],
		["semiticlexicon",
			"Weninger, Stefan et al. <i>The Semitic Languages: An International Handbook.</i> Berlin/Boston, Walter de Gruyter GmbH & Co. KG, 2011",[
				["google",		"https://books.google.be/books?id=SMzgBLT87MkC"],
				["worldcat",	"https://www.worldcat.org/title/semitic-languages-an-international-handbook/oclc/775693894"]
			]],
		["ie_poetry_myth",
			"West, M. L. <i>Indo-European Poetry and Myth.</i> New York, Oxford University Press, 2007",[
				["google",		"https://books.google.be/books?id=ZXrJA_5LKlYC"],
				["worldcat",	"https://www.worldcat.org/title/indo-european-poetry-and-myth/oclc/1126614179"]
			]],
		["nominaimlexikon",
			"Wodtko, Dagmar S. et al. <i>Nomina im Indogermanischen Lexikon.</i> Memmingen, Universit√§tsverlag Winter Heidelberg GmbH, 2008",[
				["google",		"https://books.google.be/books?id=BBxSAQAAIAAJ"],
				["worldcat",	"https://www.worldcat.org/title/nomina-im-indogermanischen-lexikon/oclc/778236996"]
			]]
	];
	glossterms=[
		["nom"	,"Nominative case"],
		["acc"	,"Accusative case"],
		["gen"	,"Genitive case"],
		["dat"	,"Dative case"],
		["abl"	,"Ablative case"],
		["ins"	,"Instrumental case"],
		["voc"	,"Vocative case"],
		["loc"	,"Locative case"],
		["dir"	,"Direct case"],
		["obl"	,"Oblique case"],
		["sg"	,"Singular number"],
		["pl"	,"Plural number"],
		["act"	,"Active voice"],
		["pas"	,"Passive voice"],
		["m"	,"Masculine gender"],
		["f"	,"Feminine gender"],
		["n"	,"Neuter gender"],
		["1"	,"First person"],
		["2"	,"Second person"],
		["3"	,"Third person"],
		["ind"	,"Indicative mood"],
		["imp"	,"Imperative mood"],
		["sjv"	,"Subjunctive mood"],
		["fut"	,"Future"],
		["pst"	,"Past"],
		["npst"	,"Non-past"],
		["neg"	,"Negative"],
		["pos"	,"Positive"],
		["pcp"	,"Participle"],
		["pret"	,"Preterite"],
		["prs"	,"Present"],
		["prf"	,"Perfect"],
		["cnj"	,"Conjunctive"],
		["prm"	,"Primary"]
	]
	_caseslist=[
		["nom","voc","acc","gen","abl","dat","loc","ins"],
		["nom",""   ,"acc","gen",""   ,"dat","loc","ins"],
		["nom",""   ,"acc","gen",""   ,"dat","loc",""   ],
		["nom",""	,"acc","gen",""   ,"dat",""   ,""   ],//Loc is still on the sheet, so can be readded if deemed necessary
		["dir",""	,""   ,""   ,""   ,"dat",""   ,""   ]
	];
	_conjunctivelist=[
		false,
		true,
		true,
		true,
		true,
		true
	];
	
	_voicelist=[
		["act","pas"],
		["act","pas"],
		["act","pas"],
		["act","pas"]
	];
	
	_genders=[
		["m","f","n"],
		["m","f","n"],
		["m","f","n"],
		["m","f","n"],
		["m","f"]
	];
	
	_tamlist=[
		[["ind",["prs","pret","fut"]],["sjv",["npst","pst"]]],
		[["ind",["prs","pret","fut"]],["sjv",["npst","pst"]]],
		[["ind",["prs","pret","fut"]],["sjv",["npst","pst"]]],
		[["ind",["prs","pret","fut"]],["sjv",["npst","pst"]]]
	];
	
	_vowels=[
		["a","e","i","o","u","y","√∏","Àê"],
		["a","e","i","o","u","y","√∏","Àê","√£","·∫Ω","ƒ©","√µ","≈©","·ªπ","√∏ÃÉ"],
		["a","e","i","o","u","y","√∏","√¶","Àê","·∫Ω","√µ","≈©"],
		["a","e","i","o","u","y","√∏","√¶","Àê","Ã©","%"]
	];
	_illegalonsets=[
		["rj","lw","km","ks","lb","lm","lp","mb","mv","nd","ng","nk","nr","rf","rg","rk","vn","rgr","rks","rtr","rtw","ktr","rw","rm","lv","ngw","nt","rkn","ln","rstr","rt","rv","mf","mm","nn","nw","rp","nzd","nz","kt","zg","mr","nzg","sj","ns","bd","gd","lk","zd","mvn","rn","jw","nj","mbr","ksm","stw","gm","pj","rb","zn","ltr","rd","rdw","rz","ls","tt","fn","mvr","ksn","lg","mn","nsr","ld","rgw","pt","ft","mbl","rs","wj","wr","lj","vd","ptw","ldw","lt","rzg","ndw","ksl","rzw","gdr","vm","rgj"],
		["rdj","rj","hs","lw","km","lb","lm","lp","mb","mn","ntj","nd","htl","ng","ngw","nk","rf","rgr","rk","rks","ks","rn","rtl","rp","lvd","vd","rkm","rw","tn","rm","nj","nt","rkn","kn","mbj","rnj","rns","ns","dn","mm","mp","rg","lht","ht","lj","rs","nw","bd","gd","gm","lf","rd","rgj","ln","rt","mbr","rstl","rv","hsm","tm","ntl","rb","bb","ltl","pm","rr","ls","ss","kk","hsn","dm","lg","ntr","ld","rgw","gn","lk","lt","rgm","pn","rdw"],
		["bb","hs","lb","mb","mn","nk","rf","rgr","rk","rks","ks","rn","rtj","htj","lvd","vd","rkm","km","mbr","ngw","nt","ng","rm","nj","rkn","kn","nd","rw","lj","rnj","rb","rj","dn","lm","mm","rns","ns","rdj","rj","nw","rg","lht","ht","lw","gm","lf","lk","lp","rgj","rv","hsm","rd","ll","ntj","mp","rd","rp","rt","ls","ltr","mbj","kt","hsn","dm","ntr","ld","rgw","rs","rgm","ln","pt","hsl","gn","lg","rr","mbl","rdw"],
		["bb","rg","nd","lŒ∏","kt","mb"]
	];
	
	_dataformat={timestyle: "long", datestyle: "long", hour: "2-digit", minute: "2-digit"};
	
	dictionaryversion=0.1;
	
	_currentstage=-1;
	
	cognateorder=["grc","pclt","lat","hye","pgmc","pslv","sqi","san","tchA","tchB","toch","hit","eng","eus"];
	
	//Load csv from Google Sheets as javascript array
	loadstr="";
	loadNote("Loading...");
	rawcsv=$.get("https://docs.google.com/spreadsheets/d/e/2PACX-1vTe8E8yH60LpBJZA9PfIgIfj7RxmVIPm97PUB1GBHEYPoT9G8dOfyFscqPYhHaEtbQ0Gt3xh6ESfQbF/pub?gid=284553596&single=true&output=csv", function() {
		loadNote("Attempting to connect to server...");
	})
		.done(function(){
			loadNote("Lexicon retrieval succesful!");
			dbase=$.csv.toArrays(rawcsv.responseText);
			parseDbase();
		})
		.fail(function(){
			loadNote("Unable to connect to Google, quite possibly because of Cross-Origin Restrictions.");
			rawcsv=$.get("backup_csv.csv", function() {
				loadNote("Attempting to read local file...");
			})
				.done(function(){
					loadNote("Lexicon retrieval succesful!");
					dbase=$.csv.toArrays(rawcsv.responseText);
					parseDbase();
				})
				.fail(function(){
					loadNote("No local copy can be found.");
					loaderror();
				});
		});
	
	function loaderror()
		{
			alert("An error has occurred while loading the lexicon. Please try again later.");
		}
		
	function loadNote(txt)
		{
			if (loadstr!="") loadstr+="</br>";
			loadstr+=txt;
			document.getElementById("loadingcontent").innerHTML=loadstr;
		}
	
	function getLangName(q)
		{
			switch(q)
			{
				case "lat": return("Latin");break;
				case "eus": return("Basque");break;
				case "peus": return("Proto-Basque");break;
				case "grc": return("Ancient Greek");break;
				case "peo": return("Old Persian");break;
				case "pclt": return("Proto-Celtic");break;
				case "legp": return("Late Egyptian");break;
				case "eng": return("English");break;
				case "pslv": return("Proto-Slavic");break;
				case "pgmc": return("Proto-Germanic");break;
				case "sqi": return("Albanian");break;
				case "toch": return("Tocharian");break;
				case "tchA": return("Tocharian A");break;
				case "tchB": return("Tocharian B");break;
				case "san": return("Sanskrit");break;
				case "hit": return("Hittite");break;
				case "hye": return("Armenian");break;
				case "gal": return("Gaulish");break;
				case "xpu": return("Punic");break;
				case "sbi": return("Suebi");break;
				case "ett": return("Etruscan");break;
				case "pie": return("Proto-Indo-European");break;
				case "psmt": return("Proto-Semitic");break;
				case "mga": return("Middle Irish");break;
				case "got": return("Gothic");break;
				case "ang": return("Old English");break;
				case "purl": return("Proto-Uralice");break;
				case "sga": return("Old Irish");break;
				case "cym": return("Welsh");break;
				case "mhg": return("Middle High German");break;
				case "gle": return("Irish");break;
				case "rus": return("Russian");break;
				default: return(q);break;
			}
		}
		
	function IPAtoXSampa(a)
		{
			//Stress, length, etc
			a=replaceAll("Àà",'"',a);
			a=replaceAll("Àê",":",a);
			a=replaceAll(" ≤","_j",a);
			a=replaceAll("À†","_G",a);
			a=replaceAll(" ∞","_h",a);
			a=replaceAll("Ã©","=",a);
			a=replaceAll("Ãû","_o",a);
			a=replaceAll("ÃÉ","~",a);
			a=replaceAll("ÃØ","_^",a);
			
			//Consonants
			a=replaceAll("…£","G",a);
			a=replaceAll("Œ≤","B",a);
			a=replaceAll("√∞","D",a);
			a=replaceAll("≈ã","N",a);
			a=replaceAll(" É","S",a);
			a=replaceAll(" Å","R",a);
			a=replaceAll("…°","g",a);
			a=replaceAll("…æ","4",a);
			a=replaceAll("…≤","J",a);
			a=replaceAll("Œ∏","T",a);
			
			//Vowels
			a=replaceAll("√¶","{",a);
			a=replaceAll("√∏","2",a);
			a=replaceAll("…ë","A",a);
			a=replaceAll("…õ","E",a);
			a=replaceAll("…™","I",a);
			a=replaceAll("…î","O",a);
			a=replaceAll(" ä","U",a);
			return(a);
		}
		
	function getWiktionaryLink(a,b)
		{
			var t="https://en.wiktionary.org/wiki/";
			//Reformat b depending on entry
			switch(a)
			{
			case "Proto-Celtic":
				b=replaceAll("f","…∏",b);
				break;
			case "Latin":
				b=replaceAll("ƒÅ","a",b);
				b=replaceAll("ƒì","e",b);
				b=replaceAll("ƒ´","i",b);
				b=replaceAll("≈ç","o",b);
				b=replaceAll("≈´","u",b);
				break;
			}
			//Fix links
			switch(a)
			{
				case "Late Egyptian": a="Egyptian";break;
				case "Proto-Celtic": t+="Reconstruction:Proto-Celtic/";a="";break;
				case "Proto-Slavic": t+="Reconstruction:Proto-Slavic/";a="";break;
				case "Proto-Germanic": t+="Reconstruction:Proto-Germanic/";a="";break;
				case "Proto-Indo-European": t+="Reconstruction:Proto-Indo-European/";a="";break;
				case "Proto-Semitic": t+="Reconstruction:Proto-Semitic/";a="";break;
			}
			t+=b;
			if (a!="") t+="#"+replaceAll(" ","%20",a);
			return(t);
		}
	
	function parseDbase()
		{
			//Scouts the array for important bits of information such as the stage names and result/ortho columns
			loadNote("Analysing different stages...");
			maincolumns=[];
			sourcecolumn=-1;
			cognatecolumn=-1;
			formidcolumn=-1;
			lasteditcolumn=-1;
			etymonotecolumn=-1;
			uidcolumn=-1;
			var k=dbase[1].length;
			for(var i=0;i<k;i++)
			{
				if (dbase[1][i]=="RESULT") maincolumns.push(i);
				if (dbase[1][i]=="COGNATE") cognatecolumn=i;
				if (dbase[1][i]=="SOURCE") sourcecolumn=i;
				if (dbase[1][i]=="FORMID") formidcolumn=i;
				if (dbase[1][i]=="LASTEDIT") lasteditcolumn=i;
				if (dbase[1][i]=="ETYMONOTE") etymonotecolumn=i;
				if (dbase[1][i]=="UID") uidcolumn=i;
			}
			if (maincolumns.length==0)
			{
				loaderror();
				return;
			}
			
			stagelist=[];//List of different stage starts and names
			happenings=[];//Above but also includes loans
			for(var i=3;i<dbase[0].length;i++)
			{
				if (dbase[0][i]!="")//Non-empty in this row means a new stage has started
				{
					stagelist.push([dbase[0][i],i]);
				}
				if (dbase[1][i]=="LOANS"||dbase[1][i]=="RESULT") happenings.push([dbase[2][i],i]);
			}
			loadNote("Stages: "+stagelist);
			loadNote("Happenings: "+happenings.length);
			//Gather words and figure out the size of the lexicon
			lexlist=[];
			var endoflexicon=-1;
			var cat="";
			for(var i=3;i<dbase.length;i++)
			{
				if (dbase[i][0]=="//") cat=dbase[i][1];
				else if (dbase[i][0]=="@@@@")
				{
					endoflexicon=i;
					i=dbase.length;
				}
				else if (dbase[i][0].charAt(0)!="¬ß"&&dbase[i][0]!="!!!") lexlist.push([i,cat]);
			}
			if (endoflexicon==-1)
			{
				loaderror();
				return;
			}
			loadNote("Words: "+lexlist.length);
			//Declension lists
			declensionlist=[];
			for(var i=endoflexicon;i<dbase.length;i++)
			{
				if (dbase[i][0]=="//") declensionlist.push([dbase[i][1],i]);
			}
			loadNote("Inflection patterns: "+declensionlist.length);
			
			loadstr=""; //Free up memory
			//Switch from loading screen to actual content
			document.getElementById("loadingcontent").style.display="none";
			document.getElementById("actualcontent").style.display="block";
			document.getElementById("page_title").innerHTML="Carite Lexicon";
			
			//Update stage list in search menu
			for(var i=0;i<stagelist.length;i++)
			{
				loadstr+="<option";
				if (i==activestage) loadstr+=" selected";
				loadstr+=">"+stagelist[i][0]+"</option>";
			}
			document.getElementById("stageselectlist").innerHTML=loadstr;
			loadstr="";
			
			//Load last stage
			loadStage(activestage);
			
			//Update global dates
			var qq=new Date(document.lastModified);
			document.getElementById("lastdocupdate").innerHTML=qq.toLocaleDateString(undefined,_dataformat);
			var tt=0;
			for(var i=0;i<dbase.length;i++)
			{
				if (dbase[i][lasteditcolumn]>tt) tt=dbase[i][lasteditcolumn];
			}
			var qq=new Date(tt);
			document.getElementById("lastlexupdate").innerHTML=qq.toLocaleDateString(undefined,_dataformat);
		}
	function parseAlphabet(stagid)
		{
			//Parse alphabet
			var tempvar="";
			var alph=[];
			alph=_alphabet[stagid].split(" ");
			active_alphabet=[];
			var j=[];
			var alphvalue=0;
			for(var i=0;i<alph.length;i++)
			{
				j=alph[i].split("~");
				if (j.length>1)
				{
					//Dropdown menu
					tempvar+="<li class='nav-item dropdown'><a class='nav-link dropdown-toggle' role='button' aria-haspopup='true' aria-expanded='false' id='navbar_dropdown_"+i+"' data-toggle='dropdown' href='#'>"+j[0]+"</a><div class='dropdown-menu' aria-labelledby='navbar_dropdown_"+i+"'>";
					for(var k=0;k<j.length;k++)
					{
						tempvar+="<a class='dropdown-item' href='#scr"+alphvalue+"'>"+j[k]+"</a>";
						active_alphabet.push(j[k]);
						alphvalue++;
					}
					tempvar+="</div></li>";
				}
				else
				{
					tempvar+="<li class='nav-item'><a class='nav-link' href='#scr"+alphvalue+"'>"+j[0]+"</a></li>";
					active_alphabet.push(j[0]);
					alphvalue++;
				}
			}
			document.getElementById("navbar_alphabetlist").innerHTML=tempvar;
		}
	function loadStage(stagid)
		{
			document.getElementById("lang_name").innerHTML=stagelist[stagid][0].toUpperCase();
			if (orderalph) parseAlphabet(stagid);
			else document.getElementById("navbar_alphabetlist").innerHTML="";
			//Create list of terms
			wordlist=[];
			var orth="";
			for(var i=0;i<lexlist.length;i++)
			{
				orth=apply_orthography(dbase[lexlist[i][0]][maincolumns[stagid]],stagid);
				if (orth!=""&&orth!="*") //If empty, this word does not yet/no longer exist in this stage!
				{
					orth2=""//apply_nativealphabet(orth,stagid);
					wordlist.push([orth,orth2,lexlist[i][0],lexlist[i][1],dbase[lexlist[i][0]][lasteditcolumn]]);
				}
			}
			//Order alphabetically
			if (orderalph) order_alph(stagid);
			else order_lastedit();
			setWordlist(stagid);
			openWotd();
			
			_currentstage=stagid;
		}
	function apply_orthography(word,stage)
		{
			var w=(word.split("~"))[0];
			w=pronFixOrtho(w,stage);
			if (stage==0)
			{
				w=replaceAll("ks","œá",w);
				w=replaceAll("nk","Œ≥k",w);
				w=replaceAll("ng","Œ≥g",w);
				
				w=replaceAll("p","œÄ",w);
				w=replaceAll("P","Œ†",w);
				w=replaceAll("b","Œ≤",w);
				w=replaceAll("B","Œí",w);
				w=replaceAll("t","œÑ",w);
				w=replaceAll("T","Œ§",w);
				w=replaceAll("d","Œ¥",w);
				w=replaceAll("D","Œî",w);
				w=replaceAll("k","Œ∫",w);
				w=replaceAll("K","Œö",w);
				w=replaceAll("g","Œ≥",w);
				w=replaceAll("G","Œì",w);
				w=replaceAll("m","Œº",w);
				w=replaceAll("M","Œú",w);
				w=replaceAll("n","ŒΩ",w);
				w=replaceAll("N","Œù",w);
				
				w=replaceAll("f","œÜ",w);
				w=replaceAll("F","Œ¶",w);
				w=replaceAll("v","œù",w);
				w=replaceAll("V","œú",w);
				w=replaceAll("s","œÉ",w);
				w=replaceAll("S","Œ£",w);
				w=replaceAll("z","Œ∂",w);
				w=replaceAll("Z","Œñ",w);
				w=replaceAll("r","œÅ",w);
				w=replaceAll("R","Œ°",w);
				w=replaceAll("l","Œª",w);
				w=replaceAll("L","Œõ",w);
				w=replaceAll("j","Œπ",w);
				w=replaceAll("J","Œô",w);
				w=replaceAll("w","œÖ",w);
				w=replaceAll("W","Œ•",w);
				w=replaceAll("h","œà",w);
				w=replaceAll("H","Œ®",w);
				
				//Add back macrons later when you find a way not to make them look like shit lmao
				w=replaceAll("ƒÅ","Œ±",w);
				w=replaceAll("ƒÄ","Œë",w);
				w=replaceAll("ƒ´","Œπ",w);
				w=replaceAll("ŒôÃÑ","Œô",w);
				w=replaceAll("≈´","œÖ",w);
				w=replaceAll("≈™","Œ•",w);
				
				w=replaceAll("a","Œ±",w);
				w=replaceAll("A","Œë",w);
				w=replaceAll("i","Œπ",w);
				w=replaceAll("I","Œô",w);
				w=replaceAll("u","œÖ",w);
				w=replaceAll("U","Œ•",w);
				
				w=replaceAll("»≥","y",w);
				w=replaceAll("YÃÑ","Y",w);
				w=replaceAll("√∏ÃÑ","ŒµœÖ",w);
				w=replaceAll("√òÃÑ","ŒïœÖ",w);
				
				w=replaceAll("e","Œµ",w);
				w=replaceAll("E","Œï",w);
				w=replaceAll("ƒì","ŒµŒπ",w);
				w=replaceAll("ƒí","ŒïŒπ",w);
				w=replaceAll("√™","Œ∑",w);
				w=replaceAll("√ä","Œó",w);
				w=replaceAll("o","Œø",w);
				w=replaceAll("O","Œü",w);
				w=replaceAll("≈ç","ŒøœÖ",w);
				w=replaceAll("≈å","ŒüœÖ",w);
				w=replaceAll("√¥","œâ",w);
				w=replaceAll("√î","Œ©",w);
				
				w=w.replace(/(œÉ)($|\s)/g,"œÇ$2");
				
				w="*"+w;
			}
			if (stage==1)
			{
				w=replaceAll("X","H",w);
				w=replaceAll("x","h",w);
				w=replaceAll("ÃØ","",w);
				w="*"+w;
			}
			if (stage==2)
			{
				w=replaceAll(" ∞","h",w);
				w=replaceAll("Œ≤","bh",w);
				w=replaceAll("√∞","dh",w);
				w=replaceAll("…£","gh",w);
				w=replaceAll("^b","B",w);
				w=replaceAll("^d","D",w);
				w=replaceAll("^g","G",w);
			}
			if (stage==3)
			{
				w=replaceAll("Œ∏","th",w);
				w=replaceAll("√∞","dh",w);
				w=replaceAll("x","kh",w);
				w=replaceAll("X","Kh",w);
				w=replaceAll("…£","gh",w);
				
				w=replaceAll("^t","T",w);
				w=replaceAll("^d","D",w);
				w=replaceAll("^g","G",w);
				
				//Accents TO FIX!
				w=w.replace(/([AƒÄEƒíIƒ™O≈åU≈™√Ü√òYaƒÅeƒìiƒ´o≈çu≈´√¶y√∏ÃÑ%])/g,"$1¬ß")
				var q=w.split("¬ß");
				
				
				for(var i=0;i<q.length;i++)
				{
					if (q[i]=="ÃÑ"&&i>0)
					{
						q[i-1]+="ÃÑ";
						q.splice(i,1);
						i-=1;
					}
				}
				
				if (q[q.length-1]=="ÃÑ")
				{
					q[q.length-2]+="ÃÑ";
					q.pop();
				}
				else if (q[q.length-1]=="") q.pop();
				
				if (q.length>0)
				{
					var ptk=q[q.length-1].replace(/([AƒÄEƒíIƒ™O≈åU≈™√Ü√òYaƒÅeƒìiƒ´o≈çu≈´√¶y√∏ÃÑ%])/g,"!");
					if (!ptk.includes("!"))
					{
						q[q.length-2]+=q[q.length-1];
						q.pop();
					}
				}
				
				if (q.length>2) //FIX! 1) don't display if stress is penultimate 2) take antestress into account (muy dificil se√±or!)
				{
					//q[q.length-1]=q[q.length-1].replace(/([mnlr]À†? ≤?)\%/g,"¬ß$1¬∞");
					q[q.length-2]+="ÕÅ";
				}
				w=q.join("");
				w=replaceAll("ÕÅÃÑ","ÃÑÕÅ",w);
				w=replaceAll("%","",w);
				
				w=replaceAll("k","c",w);
				w=replaceAll("K","C",w);
				w=replaceAll("w","u",w);
				w=replaceAll("W","U",w);
				w=replaceAll("j","i",w);
				w=replaceAll("J","I",w);
				w=replaceAll("≈ã","nh",w);
				
				//diacritics
				w=replaceAll(" ≤","Ãá",w);
				w=replaceAll("À†","Ã®",w);
			}
			return(w);
		}
	/*function apply_nativealphabet(word,stage) THIS IS A RELIC, left in case it's useful in the future
		{
			var w=(word.split("~"))[0];
			w=pronFixOrtho(w,stage);
			if (stage==0)
			{
				REPLACED!
				w=replaceAll("st","êåÜ",w);
				w=replaceAll("sk","êåó",w);
				
				w=replaceAll("a","êåÄ",w);
				w=replaceAll("ƒÅ","êåÄ",w);
				w=replaceAll("b","êåÅ",w);
				w=replaceAll("d","êåÉ",w);
				w=replaceAll("e","êåÑ",w);
				w=replaceAll("ƒì","êåÑ",w);
				w=replaceAll("√™","êåÑ",w);
				w=replaceAll("f","êåÖ",w);
				w=replaceAll("v","êåÖ",w);
				w=replaceAll("w","êåÖ",w);
				w=replaceAll("u","êåÖ",w);
				w=replaceAll("≈´","êåÖ",w);
				w=replaceAll("g","êåÇ",w);
				w=replaceAll("h","êåá",w);
				w=replaceAll("i","êåâ",w);
				w=replaceAll("ƒ´","êåâ",w);
				w=replaceAll("j","êåâ",w);
				w=replaceAll("k","êåä",w);
				w=replaceAll("l","êåã",w);
				w=replaceAll("m","êåå",w);
				w=replaceAll("n","êåç",w);
				w=replaceAll("o","êåè",w);
				w=replaceAll("≈ç","êåè",w);
				w=replaceAll("√¥","êåè",w);
				w=replaceAll("p","êåê",w);
				w=replaceAll("r","êåì",w);
				w=replaceAll("s","êåî",w);
				w=replaceAll("z","êåî",w);
				w=replaceAll("t","êåï",w);
				w=replaceAll("»≥","êåñ",w);
				
				var qqq=Math.floor((Math.random()* 2));
				if (qqq==0) w=replaceAll("√∏ÃÑ","êåÑ",w);
				else w=replaceAll("√∏ÃÑ","êåè",w);
				
				w=((word.split("")).reverse()).join("");
			}
			return(w);
		}*/
	function order_alph(stagid)
		{
			//This function orders the world list alphabetically - either by romanisation or native script
			wordlist.sort(function(a,b){
				return(strSortAlph(a[0].toUpperCase(),b[0].toUpperCase()));
			});
		}
	function order_lastedit()
		{
			wordlist.sort(function(a,b){
				return(a[4]<b[4]);
			});
		}
	function strSortAlph(a,b)
		{
			a=replaceAll("-","",a);
			b=replaceAll("-","",b);
			for(var i=0;i<a.length&&i<b.length;i++)
			{
				var cha=active_alphabet.indexOf(a[i]);
				var chb=active_alphabet.indexOf(b[i]);
				if (cha<chb) return -1;
				if (cha>chb) return 1;
			}
			return 0;
		}
		function replaceAll(find, replace, string) {
			  return string.replace(new RegExp(escapeRegExp(find), 'g'), replace);
			}
			function escapeRegExp(string) {
				    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
				}
	function setWordlist(stagid)
		{
			var temp="";
			var alphvalue=-1;
			var foundresult=0;
			var timevalue="";
			var searchval=document.getElementById("searchinputvalue").value;
			var check=0;
			//if (romanisationfirst==false&&_alphabet2[stagid]!="") check=1;
			for(var i=0;i<wordlist.length;i++)
			{
				var j="";
				if (!orderalph)
				{
					var checktime=new Date(wordlist[i][4]);
					var ccq=checktime.toLocaleDateString(undefined,{timestyle: "short"});
					if (wordlist[i][4]=="") ccq="Unknown";
					if (timevalue!=ccq)
					{
						if (timevalue!="") temp+="</div>";
						timevalue=ccq;
						temp+="<div class='container-fluid alphsection'><h5 class='alphabetstripe'><span>"+timevalue+"</span></h5>";
					}
				}
				if (orderalph)
				{
					var j=wordlist[i][check].charAt(0).toUpperCase();
					if(j=="-"||j=="*") j=wordlist[i][check].charAt(1).toUpperCase();
					if(j=="-") j=wordlist[i][check].charAt(2).toUpperCase();
					while(alphvalue<active_alphabet.indexOf(j))
					{
						alphvalue++;
						if (alphvalue>0) temp+="</div>";
						temp+="<div id='scr"+alphvalue+"' class='container-fluid alphsection'><h5 class='alphabetstripe'><span>"+active_alphabet[alphvalue]+"</span></h5>";
					}
				}
				var success=false;
				if (searchval=="") success=true;
				else
				{
					if (searchenglish)
					{
						var qqq=dbase[wordlist[i][2]][maincolumns[activestage]+1];//Needs improvemet
						if (qqq.search(searchval)!=-1) success=true;
					}
					else
					{
						if (wordlist[i][0].search(searchval)!=-1) success=true;
						if (wordlist[i][1].search(searchval)!=-1) success=true;
					}
				}
				if (success==true)
				{
					temp+="<div class='wordentry' onclick='openWord("+i+",false);collapseIfMobile();'><h5>"+display(wordlist[i])+" <small>";
					j="???";
					for(var k=0;k<declensionlist.length;k++)
					{
						if (declensionlist[k][0]==wordlist[i][3]) j=dbase[declensionlist[k][1]][2];
					}
					temp+=j+"</small></h5></div>";
					foundresult++;
				}
			}
			if (orderalph)
			{
				while(alphvalue<active_alphabet.length-1)
				{
					alphvalue++;
					if (alphvalue>0) temp+="</div>";
					temp+="<div id='scr"+alphvalue+"' class='container-fluid alphsection'><h5 class='alphabetstripe'><span>"+active_alphabet[alphvalue]+"</span></h5>";
				}
			}
			temp+="</div>";
			//Attach amount of found entries
			temp=" found.</small></div>"+temp;
			if (foundresult==1) temp="entry"+temp;
			else temp="entries"+temp;
			temp="<div id='entryamountbox' class='container-fluid'><small>"+foundresult+" "+temp;
			document.getElementById("wordlist").innerHTML=temp;
		}
	function display(term)
		{
			return(term[0]);
		}
	function openWotd()
		{
			var now=Date.now();//milliseconds
			now=Math.floor(now/1000);//seconds
			now=Math.floor(now/60);//minutes
			now=Math.floor(now/60);//hours
			now=Math.floor(now/24);//days
			now*=now;
			var wid=now % (wordlist.length-1);
			openWord(wid,true);
		}
	function getPronunciation(word)
		{
			word=word.toLowerCase();
			word=replaceAll("^","",word);
			word=pronFixOrtho(word,activestage);
			//applyalways
			if (activestage<4)
			{
				word=replaceAll("ƒÅ","aÀê",word);
				word=replaceAll("ƒì","eÀê",word);
				word=replaceAll("√™","eÀêÀê",word);
				word=replaceAll("ƒ´","iÀê",word);
				word=replaceAll("≈ç","oÀê",word);
				word=replaceAll("√¥","oÀêÀê",word);
				word=replaceAll("≈´","uÀê",word);
				word=replaceAll("»≥","yÀê",word);
				word=replaceAll("√∏ÃÑ","√∏Àê",word);
				word=replaceAll("ÃÑ","Àê",word);
			}
			if (activestage==1||activestage==2) word=replaceAll("√¶ÃÑ","√¶Àê",word);
			if (activestage>0&&activestage<3)
			{
				word=replaceAll("ƒÖÃÑ","√£Àê",word);
				word=replaceAll("ƒôÃÑ","·∫ΩÀê",word);
				word=replaceAll("ƒØÃÑ","ƒ©Àê",word);
				word=replaceAll("«´ÃÑ","√µÀê",word);
				word=replaceAll("≈≥ÃÑ","≈©Àê",word);
				word=replaceAll("√¶Ã®ÃÑ","√¶ÃÉÀê",word);
				word=replaceAll("√∏Ã®ÃÑ","√∏ÃÉÀê",word);
				word=replaceAll("yÃ®ÃÑ","yÃÉÀê",word);
				word=replaceAll("ƒÖ","√£",word);
				word=replaceAll("ƒô","·∫Ω",word);
				word=replaceAll("ƒØ","ƒ©",word);
				word=replaceAll("«´","√µ",word);
				word=replaceAll("≈≥","≈©",word);
				word=replaceAll("√¶Ã®","√¶ÃÉ",word);
				word=replaceAll("√∏Ã®","√∏ÃÉ",word);
				word=replaceAll("yÃ®","yÃÉ",word);
			}
			if (activestage==2) word=replaceAll("≈ô"," Å",word);
			//split into syllables
			for(var i=0;i<_vowels[activestage].length;i++)
			{
				word=replaceAll(_vowels[activestage][i],"¬ß"+_vowels[activestage][i]+"¬ß",word);
			}
			//Fix semivowels
			for(var i=0;i<_vowels[activestage].length;i++)
			{
				word=replaceAll("¬ß¬ß"+_vowels[activestage][i]+"¬ßÃØ",_vowels[activestage][i]+"ÃØ¬ß",word);
			}
			word=replaceAll("¬ß¬ßÀê","Àê",word);
			var q=word.split("¬ß");
			word=".";
			for(var i=0;i<q.length;i++)
			{
				if (_vowels[activestage].includes(q[i].charAt(0))) //is a syllabic component
				{
					word+=q[i];
				}
				else
				{
					if (i==q.length-1||i==0) word+=q[i];
					else
					{
						var t="";
						var k=q[i];
						var p="";
						while(_illegalonsets[activestage].includes(k))
						{
							p=k.charAt(0);
							t+=p;
							k=k.replace(p,"");
						}
						word+=t+"."+k;
					}
				}
			}
			//apply stress
			if (activestage<2) word=word.replace(".",".Àà"); //Primary stress
			if (activestage==2)
			{
				//Penultimate stress
				var q=word.split(".");
				if (q.length>2) q[q.length-2]="Àà"+q[q.length-2];
				else q[1]="Àà"+q[1];
				word=q.join(".");
			}
			if (activestage==3)
			{
				//Penultimate stress
				var q=word.split(".");
				if (q.length>2) q[q.length-2]="Àà"+q[q.length-2];
				else q[1]="Àà"+q[1];
				//Fix up %
				if (q.length>1)
				{
					if (q[q.length-1].includes("%"))
					{
						var p=q[q.length-1];
						p=p.replace(/([mnlr])( ≤?À†? ≤?À†? ≤?)\%/g,"$1Ã©$2")
						if (p==q[q.length-1])
						{
							q[q.length-2]+=q[q.length-1].replace("%","");
							q.pop();
						}
						else q[q.length-1]=p;
					}
				}
				word=q.join(".");
				//Fix "oversyllabic" sonorants
				word=word.replace(/([aeiouy√¶√∏]Àê?).([mnlr])Ã©/g,"$1$2");
			}
			word=word.replace("Àà-","-");
			//finalise
			word=word.replace(".","");
			//fix quirks!
			if (activestage==1) word=replaceAll("x","h",word);
			
			//applyalways + allophones
			word=pronAlways(word);
			word="/"+word+"/, "+pronAllophones(word);
			word=replaceAll("g","…°",word);
			word=word.replace(/([a-z])(\1)/g,"$1Àê");
			
			//xsampa conversion if necessary
			if (usexsampa) word=IPAtoXSampa(word);
			return(word);
		}
	function pronFixOrtho(w,s)
		{
			//Nasal assimilation
			w=w.replace(/(n)([mpb])/g,"m$2");
			//Osthoff's law
			w=w.replace(/(ƒÅ)([wjmnlriu][mnpbtdkgszfvjwlr])/g,"a$2");
			w=w.replace(/(ƒì)([wjmnlriu][mnpbtdkgszfvjwlr])/g,"e$2");
			w=w.replace(/(ƒ´)([wjmnlriu][mnpbtdkgszfvjwlr])/g,"i$2");
			w=w.replace(/(≈ç)([wjmnlriu][mnpbtdkgszfvjwlr])/g,"o$2");
			w=w.replace(/(≈´)([wjmnlriu][mnpbtdkgszfvjwlr])/g,"u$2");
			w=w.replace(/(yÃÑ)([wjmnlriu][mnpbtdkgszfvjwlr])/g,"y$2");
			w=w.replace(/(√¶ÃÑ)([wjmnlriu][mnpbtdkgszfvjwlr])/g,"√¶$2");
			w=w.replace(/(√∏ÃÑ)([wjmnlriu][mnpbtdkgszfvjwlr])/g,"√∏$2");
			//Break up vowels! to do
			//initial mutation
			if (activestage==2)
			{
				w=replaceAll("$b","Œ≤",w); //FIX TO ONLY COUNT IF A VOWEL FOLLOWS!
				w=replaceAll("$d","√∞",w); //FIX TO ONLY COUNT IF A VOWEL FOLLOWS!
				w=replaceAll("$g","…£",w); //FIX TO ONLY COUNT IF A VOWEL FOLLOWS!
				w=w.replace(/(\$)([aƒÅeƒìiƒ´o≈çu≈´yyÃÑ√∏√∏ÃÑ√¶√¶ÃÑƒôƒôÃÑ«´«´ÃÑ≈≥≈≥ÃÑ])/g,"j$2");
				w=replaceAll("$","",w);
			}
			
			//Neutralise velar/palatal
			if (activestage==3)
			{
				w=replaceAll("$b","v",w); //FIX TO ONLY COUNT IF A VOWEL FOLLOWS!
				w=replaceAll("$d","√∞",w); //FIX TO ONLY COUNT IF A VOWEL FOLLOWS!
				w=replaceAll("$g","…£",w); //FIX TO ONLY COUNT IF A VOWEL FOLLOWS!
				w=w.replace(/(\$)([aƒÅeƒìiƒ´o≈çu≈´yyÃÑ√∏√∏ÃÑ√¶√¶ÃÑ])/g,"j$2");
				w=replaceAll("$","",w);
				
				w=replaceAll(" ≤ ≤"," ≤",w);
				w=replaceAll("À†À†","À†",w);
				w=replaceAll(" ≤À†"," ≤",w);
				w=replaceAll("À† ≤","À†",w);
				w=w.replace(/([wkg≈ãx])(À†)/g,"$1");
				w=replaceAll("j ≤","j",w);
				
				w=w.replace(/([aƒÅeƒìiƒ´o≈çu≈´yyÃÑ√∏√∏ÃÑ√¶√¶ÃÑƒôƒôÃÑ«´«´ÃÑ≈≥≈≥ÃÑ])(d)\%$/g,"$1√∞%");
				w=w.replace(/([aƒÅeƒìiƒ´o≈çu≈´yyÃÑ√∏√∏ÃÑ√¶√¶ÃÑƒôƒôÃÑ«´«´ÃÑ≈≥≈≥ÃÑ])(g)\%$/g,"$1…£%");
			}
			return(w);
		}
	function pronAlways(w)
		{
			// voicing assimilation?
			//bdg > BDG
			if (activestage==2) w=w.replace(/([Àêaeiouy√¶√∏√£·∫Ω√µ≈©]Àê?\.Àà?)(b)([aƒÅeƒìiƒ´o≈çu≈´yyÃÑ√∏√∏ÃÑ√¶√¶ÃÑƒÖƒÖÃÑƒôƒôÃÑ«´«´ÃÑ≈≥≈≥ÃÑ])/g,"$1Œ≤$3");
			if (activestage==2||activestage==3)
			{
				w=w.replace(/([Àêaeiouy√¶√∏√£·∫Ω√µ≈©]Àê?\.Àà?)(d)([aƒÅeƒìiƒ´o≈çu≈´yyÃÑ√∏√∏ÃÑ√¶√¶ÃÑƒÖƒÖÃÑƒôƒôÃÑ«´«´ÃÑ≈≥≈≥ÃÑ])/g,"$1√∞$3");
				w=w.replace(/([Àêaeiouy√¶√∏√£·∫Ω√µ≈©]Àê?\.Àà?)(g)([aƒÅeƒìiƒ´o≈çu≈´yyÃÑ√∏√∏ÃÑ√¶√¶ÃÑƒÖƒÖÃÑƒôƒôÃÑ«´«´ÃÑ≈≥≈≥ÃÑ])/g,"$1…£$3");
			}
			if (activestage==3)
			{
				w=w.replace(/(n)(\.?Àà?[wkgx])/g,"≈ã$2");
			}
			return(w);
		}
	function pronAllophones(w)
		{
			//Nasal and labiodental velar
			if (activestage<3) w=w.replace(/(n)(\.?Àà?[wkg])/g,"≈ã$2");
			w=w.replace(/(m)(\.?Àà?[fv])/g,"…±$2");
			//h > x / backvowel
			if (activestage==1)
			{
				w=w.replace(/(h)(\.?Àà?[aou]Àê?)/g,"x$2");
				w=w.replace(/([aou]Àê?\.?Àà?)(h)/g,"$1x");
			}
			
			if (activestage==2) w=replaceAll(" Å"," ÅÃû",w);
			
			if (activestage==3) w=w.replace(/(s)(\.?Àà?[ptkmn])/g," É$2");
			return("["+w+"]");
		}
	function openWord(wid,first)
		{
			if (!first) $('.alert').alert("close");
			$('#tab_click_general').trigger("click");
			_last_opened=wid;
			document.getElementById("entry_name").innerHTML=display(wordlist[wid]);
			var j="";
			var clid=-1;
			for(var i=0;i<declensionlist.length;i++)
			{
				if (declensionlist[i][0]==wordlist[wid][3])
				{
					j=dbase[declensionlist[i][1]][2];
					clid=i;
				}
			}
			document.getElementById("entry_category").innerHTML=j;
			var wordcategoryopen=j;
			
			var temp="";
			var translist=dbase[wordlist[wid][2]][maincolumns[activestage]+1].split(",");
			for(var i=0;i<translist.length;i++)
			{
				temp+="<li>";
				var k=translist[i].split("¬£");
				if (k.length>1) temp+="(<i>"+replaceAll("¬ß",", ",k[1])+"</i>) ";
				temp+=k[0];
				temp+="</li>";
			}
			document.getElementById("entry_translations").innerHTML=temp;
			
			//Build pronunciation
			temp=dbase[wordlist[wid][2]][maincolumns[activestage]].toLowerCase();
			temp=getPronunciation((temp.split("~"))[0]);
			temp="<li>"+temp+"</li>";
			
			document.getElementById("entry_pronunciation").innerHTML=temp;
			
			//Find synonyms
			document.getElementById("synonyms_tab").style.display="initial";
			temp="";
			for(var i=0;i<translist.length;i++)
			{
				var ttt=[];
				for(var j=0;j<wordlist.length;j++)
				{
					var l=wordlist[j][2];
					var m=dbase[l][maincolumns[activestage]+1].split(",");
					for(var k=0;k<m.length;k++)
					{
						if (translist[i]==m[k]&&j!=wid) ttt.push(j);
					}
				}
				if (ttt.length>0)
				{
					temp+="<li>(<i>"+translist[i]+"</i>): ";
					for(var j=0;j<ttt.length;j++)
					{
						if (j>0) temp+=", ";
						temp+="<a class='clickety' onclick='openWord("+ttt[j]+",false);'>"+wordlist[ttt[j]][0]+"</a>";
					}
					temp+="</li>";
				}
			}
			document.getElementById("synonym_list").innerHTML=temp;
			if (temp=="") document.getElementById("synonyms_tab").style.display="none";
			
			//Build etymology
			temp="";
			var prevmeaning="";
			var startingpoint=-1;
			var stagecycle=activestage-1;
			for(var i=0;i<happenings.length;i++)
			{
				if (happenings[i][1]+2==stagelist[activestage][1]) startingpoint=i+1;
			}
			//else
			{
				for(var i=startingpoint;i>-2;i--)
				{
					if (i==-1)
					{
						if (temp!="") temp+=", ";
						temp+="from Proto-Indo-European ";
						if (dbase[wordlist[wid][2]][2]!="")
						{
							temp+="<i>*"+dbase[wordlist[wid][2]][2];
							temp+="</i>, from Proto-Indo-European ";
						}
						temp+="<i>*"+dbase[wordlist[wid][2]][1]+"</i>";
						if (dbase[wordlist[wid][2]][0]!="")
						{
							temp+=", from Proto-Indo-European ";
							temp+="<i>*"+dbase[wordlist[wid][2]][0]+"</i>";
						}
					}
					else if (dbase[wordlist[wid][2]][happenings[i][1]]!="")
					{
						if (temp!="") temp+=", ";
						if (happenings[i][0]!="VVV")
						{
							//Not inherited aka loan/contemporary derivation
							var temparr=dbase[wordlist[wid][2]][happenings[i][1]].split(" ");
							if (temparr[0].charAt(0)=="L")
							{
								//Loan
								temp+="loaned from "+parseLoan(temparr,happenings[i][0]);
								i=-1; //Since it's not inherited, cancel the loop since we reached the earliest point
							}
						}
						else
						{
							temp+="from "+stagelist[stagecycle][0]+" <i>"+apply_orthography(dbase[wordlist[wid][2]][happenings[i][1]],stagecycle);
							temp+="</i> (‚Äú";
							if (dbase[wordlist[wid][2]][happenings[i][1]+1]==prevmeaning) temp+="id.";
							else
							{
								prevmeaning=dbase[wordlist[wid][2]][happenings[i][1]+1];
								temp+=replaceAll(",",", ",prevmeaning);
							}
							temp+="‚Äù)"
							stagecycle--;
						}
					}
				}
			}
			temp=(temp.charAt(0).toUpperCase()+temp.slice(1)+".").replace("..",".");
			//Handle cognates and formids
			var coggies1=dbase[wordlist[wid][2]][cognatecolumn].split(",");
			var formies1=dbase[wordlist[wid][2]][formidcolumn].split(",");
			var coggies2=[];
			var formies2=[];
			//Break up further
			for(var i=0;i<coggies1.length;i++)
			{
				coggies2.push((coggies1[i].trim()).split(" "));
			}
			for(var i=0;i<formies1.length;i++)
			{
				formies2.push((formies1[i].trim()).split(" "));
			}
			//Sort by language order
			coggies2.sort(function(a,b){return cognateorder.indexOf(a[0])-cognateorder.indexOf(b[0]);});
			formies2.sort(function(a,b){return cognateorder.indexOf(a[0])-cognateorder.indexOf(b[0]);});
			if (coggies2[0]!=""||formies2[0]!="")
			{
				temp+=" "
				var hasformids=false;
				//Start with formally identicals
				if (formies2[0]!="")
				{
					hasformids=true;
					temp+="Formally identical to ";
					for(var i=0;i<formies2.length;i++) {if (i==formies2.length-1&&i!=0) temp+=" and ";else if (i>0) temp+=", "; temp+=formatCognate(formies2[i]);}
				}
				if (coggies2[0]!="")
				{
					if (hasformids) temp+=" while cognate with ";
					else temp+="Cognate with ";
					for(var i=0;i<coggies2.length;i++) {if (i==coggies2.length-1&&i!=0) temp+=" and ";else if (i>0) temp+=", "; temp+=formatCognate(coggies2[i]);}
				}
				temp+=".";
			}
			
			if (dbase[wordlist[wid][2]][etymonotecolumn]!="") temp+=" "+parseEtymoText(dbase[wordlist[wid][2]][etymonotecolumn]);
			document.getElementById("entry_etymologytext").innerHTML=temp;
			
			//Get related terms
			document.getElementById("etymo_relatedwords").style.display="initial";
			temp="";
			var check1=dbase[wordlist[wid][2]][0];
			var check2=dbase[wordlist[wid][2]][1];
			var check3=dbase[wordlist[wid][2]][1];
			if (check1!=""||check2!=""||check3!="")
			{
				for(var i=0;i<wordlist.length;i++)
				{
					var goahead=false;
					if (check1==dbase[wordlist[i][2]][0]&&check1!="") goahead=true;
					if (check2==dbase[wordlist[i][2]][1]&&check2!="") goahead=true;
					if (check3==dbase[wordlist[i][2]][2]&&check3!="") goahead=true;
					if (goahead&&i!=wid) temp+="<li><a class='clickety' onclick='openWord("+i+",false);'>"+wordlist[i][0]+"</a></li>";
				}
			}
			document.getElementById("etymo_relatedtermslist").innerHTML=temp;
			if (temp=="") document.getElementById("etymo_relatedwords").style.display="none";
			
			//Set sources
			temp=dbase[wordlist[wid][2]][sourcecolumn];
			if (temp=="") temp="No source specified. If you believe you have a source that may be relevant, please get in touch.";
			else temp="<ol>"+list_sources(temp.split(","))+"</ol>";
			document.getElementById("entry_sourcetext").innerHTML=temp;
			
			//Set inflection table
			document.getElementById("dicentry_gender").style.display="none";
			document.getElementById("tab_inflect_li").style.display="none";
			temp="";
			if (wordcategoryopen=="Noun")
			{
				document.getElementById("tab_inflect_li").style.display="initial";
				var stemarray=dbase[wordlist[wid][2]][maincolumns[activestage]].split("~");
				//Figure out raw stem of the first index
				var klaka=((stemarray[0].split("")).reverse()).join(""); //Reverse
				//Get precise moment
				var kluku=-1;
				for(var i=0;i<declensionlist.length;i++) if (declensionlist[i][0]==wordlist[wid][3]) kluku=declensionlist[i][1]+1;
				//Check if not a reference!
				if (dbase[kluku-1][stagelist[activestage][1]].charAt(0)==">")
				{
					var newdb=dbase[kluku-1][stagelist[activestage][1]].replace(">","");
					for(var i=0;i<declensionlist.length;i++) if (declensionlist[i][0]==newdb) kluku=declensionlist[i][1]+1;
				}
				var kloko=(((dbase[kluku][maincolumns[activestage]].replace("0-","")).split("")).reverse()).join("");
				klaka=klaka.replace(kloko,"");
				stemarray[0]=((klaka.split("")).reverse()).join(""); //Reverse
				
				document.getElementById("dicentry_gender").style.display="initial";
				document.getElementById("dicentry_gender2").innerHTML=dbase[kluku-1][stagelist[activestage][1]+1];
				
				temp='<table class="table w-auto table-sm"><thead>';
				var beq=_conjunctivelist[activestage];
				temp+="<tr><th colspan='"+(3+beq*2)+"' scope='col'>"+dbase[kluku-1][stagelist[activestage][1]]+"</th></tr>";
				if (beq) temp+="<tr><th scope='col'></th><th scope='col' colspan='2'>"+glossText("prm",returnGloss("prm"))+"</th><th scope='col' colspan='2'>"+glossText("cnj",returnGloss("cnj"))+"</th></tr>";
				temp+='<tr><th scope="col"></th>';
				for(var i=0;i<=beq;i++) temp+='<th scope="col">'+glossText("sg",returnGloss("sg"))+'</th><th scope="col">'+glossText("pl",returnGloss("pl"))+"</th>";
				temp+="</tr></thead><tbody>";
				for(var i=0;i<_caseslist[0].length;i++)
				{
					if (_caseslist[activestage][i]!="")
					{
						temp+="<tr><th scope='row'>"+glossText(_caseslist[activestage][i],returnGloss(_caseslist[activestage][i]))+"</th>";
						//singular
						temp+="<td>"+apply_orthography(attachSuffix(stemarray,getSuffix(kluku+i)),activestage)+"</td>";
						//plural
						temp+="<td>"+apply_orthography(attachSuffix(stemarray,getSuffix(kluku+_caseslist[0].length+i)),activestage)+"</td>";
						if (beq)
						{
							//singular
							temp+="<td>"+apply_orthography(attachSuffix(stemarray,getSuffix(kluku+_caseslist[0].length*2+i)),activestage)+"</td>";
							//plural
							temp+="<td>"+apply_orthography(attachSuffix(stemarray,getSuffix(kluku+_caseslist[0].length*3+i)),activestage)+"</td>";
						}
						temp+="</tr>";
					}
				}
				temp+="</tbody></table>";
			}
			if (wordcategoryopen=="Adjective"||(wordcategoryopen=="Numeral"&&wordlist[wid][3]!="NUM_GEN"))
			{
				document.getElementById("tab_inflect_li").style.display="initial";
				var iamnumeral=(wordcategoryopen=="Numeral");
				if (wordlist[wid][3]!="NUM_ONE"&&wordlist[wid][3]!="NUM_TWO"&&wordlist[wid][3]!="NUM_THREE") iamnumeral=false;
				
				var stemarray=dbase[wordlist[wid][2]][maincolumns[activestage]].split("~");
				//Figure out raw stem of the first index
				var klaka=((stemarray[0].split("")).reverse()).join(""); //Reverse
				//Get precise moment
				var kluku=-1;
				for(var i=0;i<declensionlist.length;i++) if (declensionlist[i][0]==wordlist[wid][3]) kluku=declensionlist[i][1]+1;

				//Figure out which declensions to draw data from
				var decolist=[];
				for(var i=0;i<_genders[activestage].length;i++)
				{
					for(var j=0;j<declensionlist.length;j++)
					{
						if (declensionlist[j][0]==dbase[kluku-1][stagelist[activestage][1]+1+i]) decolist.push(declensionlist[j][1]+1);
					}
				}
				
				temp="Error loading declension! Please get in touch to report this bug.";
				if (decolist.length>0)
				{
					var kloko=(((dbase[decolist[0]][maincolumns[activestage]].replace("0-","")).split("")).reverse()).join("");
					klaka=klaka.replace(kloko,"");
					stemarray[0]=((klaka.split("")).reverse()).join(""); //Reverse
				
					temp='<table class="table w-auto table-sm"><thead>';
					temp+="<tr><th colspan='"+(1+decolist.length*(1+(!iamnumeral)))+"' scope='col'>"+dbase[kluku-1][stagelist[activestage][1]]+"</th></tr></thead><tbody>";
					for(var i=0;i<=_conjunctivelist[activestage];i++)
					{
						if (_conjunctivelist[activestage])
						{
							temp+="<tr><th colspan='"+(1+decolist.length*(1+(!iamnumeral)))+"' scope='col'>";
							if (i==0) temp+=glossText("prm",returnGloss("prm"));
							else temp+=glossText("cnj",returnGloss("cnj"));
							temp+="</th></tr>";
						}
							//Genders + number
							temp+="<tr><th></th>";
							for(var j=0;j<decolist.length;j++) temp+="<th colspan='"+(1+!(iamnumeral))+"'>"+glossText(_genders[activestage][j],returnGloss(_genders[activestage][j]))+"</th>";
							temp+="</tr><tr>";
							if (!iamnumeral)
							{
								temp+="<th></th>";
								for(var j=0;j<decolist.length;j++) temp+="<th>"+glossText("sg",returnGloss("sg"))+"</th><th>"+glossText("pl",returnGloss("pl"))+"</th>";
								temp+="</tr>";
							}
							for(var j=0;j<_caseslist[0].length;j++)
							{
								if (_caseslist[activestage][j]!="")
								{
									temp+="<tr><th scope='row'>"+glossText(_caseslist[activestage][j],returnGloss(_caseslist[activestage][j]))+"</th>";
									for(var k=0;k<decolist.length;k++)
									{
										//singular
										temp+="<td>"+apply_orthography(attachSuffix(stemarray,adjStem(getSuffix(decolist[k]+_caseslist[0].length*2*i+j),decolist[k])),activestage)+"</td>";
										//plural
										if (!iamnumeral) temp+="<td>"+apply_orthography(attachSuffix(stemarray,adjStem(getSuffix(decolist[k]+_caseslist[0].length*(2*i+1)+j),decolist[k])),activestage)+"</td>";
									}
									temp+="</tr>";
								}
							}
					}
					
					temp+="</tbody></table>";
				}
			}
			if (wordcategoryopen=="Verb")
			{
				document.getElementById("tab_inflect_li").style.display="initial";
				var stemarray=dbase[wordlist[wid][2]][maincolumns[activestage]].split("~");
				//Figure out raw stem of the first index
				var klaka=((stemarray[0].split("")).reverse()).join(""); //Reverse
				//Get precise moment
				var kluku=-1;
				for(var i=0;i<declensionlist.length;i++) if (declensionlist[i][0]==wordlist[wid][3]) kluku=declensionlist[i][1]+1;
				//Check if not a reference!
				if (dbase[kluku-1][stagelist[activestage][1]].charAt(0)==">")
				{
					var newdb=dbase[kluku-1][stagelist[activestage][1]].replace(">","");
					for(var i=0;i<declensionlist.length;i++) if (declensionlist[i][0]==newdb) kluku=declensionlist[i][1]+1;
				}
				var kloko=(((dbase[kluku][maincolumns[activestage]].replace("0-","")).split("")).reverse()).join("");
				klaka=klaka.replace(kloko,"");
				stemarray[0]=((klaka.split("")).reverse()).join(""); //Reverse
				
				temp='<table class="table w-auto table-sm"><thead>';
				temp+='<tr><th colspan="8" scope="col">'+dbase[kluku-1][stagelist[activestage][1]]+"</th></tr></thead><tbody>";
				for(var i=0;i<_tamlist[activestage].length;i++)
				{
					var q=_tamlist[activestage][i][0];
					temp+="<tr><th colspan='2' rowspan='2' scope='col'>"+glossText(q,returnGloss(q))+"</th><th colspan='3' scope='col'>"+glossText("sg",returnGloss("sg"))+"</th><th colspan='3' scope='col'>"+glossText("pl",returnGloss("pl"))+"</th></tr>";
					temp+="<tr><th scope='col'>"+glossText("1",returnGloss("1"))+"</th><th scope='col'>"+glossText("2",returnGloss("2"))+"</th><th scope='col'>"+glossText("3",returnGloss("3"))+"</th><th scope='col'>"+glossText("1",returnGloss("1"))+"</th><th scope='col'>"+glossText("2",returnGloss("2"))+"</th><th scope='col'>"+glossText("3",returnGloss("3"))+"</th></tr>";
					for(var j=0;j<_voicelist[activestage].length;j++)
					{	
						for(var k=0;k<_tamlist[activestage][i][1].length;k++)
						{
							temp+="<tr>";
							if (k==0) temp+="<th scope='col' rowspan='"+_tamlist[activestage][i][1].length+"'>"+glossText(_voicelist[activestage][j],returnGloss(_voicelist[activestage][j]))+"</th>";
							temp+="<th scope='col'>"+glossText(_tamlist[activestage][i][1][k],returnGloss(_tamlist[activestage][i][1][k]))+"</th>";
							for(var l=0;l<6;l++)
							{
								temp+="<td>"+apply_orthography(attachSuffix(stemarray,getSuffix(kluku+(l+k*6+j*_tamlist[activestage][i][1].length*6+i*_tamlist[activestage][i][1].length*6*(_voicelist[activestage].length+1)))),activestage)+"</td>";
							}
							temp+="</tr>";
						}
					}
				}
				temp+="</tbody></table>";
			}
			
			document.getElementById("inflection_content").innerHTML=temp;
			
			//Set last edited
			var qq=new Date(wordlist[wid][4]);
			document.getElementById("word_last_edited_span").innerHTML=qq.toLocaleDateString(undefined,_dataformat);
			
			$('[data-toggle="tooltip"]').tooltip();
		}
	function getSuffix(paipo)
		{
			var q="";
			if (dbase[paipo][1]==">>-1") paipo-=1;
			if (dbase[paipo][1]==">>-2") paipo-=2;
			if (dbase[paipo][1]==">>-3") paipo-=3;
			if (dbase[paipo][1]==">>-4") paipo-=4;
			return(dbase[paipo][maincolumns[activestage]]);
		}
	function attachSuffix(array,suffix)
		{
			var q=suffix;
			for(var i=0;i<10;i++)
			{
				var p=i;
				if (p>=array.length) p=0;
				q=q.replace(i+"-",array[p].replace("-",""));
			}
			return(q.replace("-",""));
		}
	function updateStage()
		{
			activestage=document.getElementById("stageselectlist").selectedIndex;
			//Clear search bar
			document.getElementById("searchinputvalue").value="";
			//Load stage
			loadStage(activestage);	
		}
	function formatCognate(input)
		{
			var tf=input[1].split("=");
			var ts=getLangName(input[0]);
			var output=ts+" ";
			if (tf.length==1) output+="<i>";
			output+='<a href="'+getWiktionaryLink(ts,tf[0])+'" target="_blank">'+asterisk(input[0])+tf[0]+'</a>';
			if (tf.length==1) output+="</i>";
			if (tf.length>1) output+=" (<i>"+tf[1]+"</i>)";
			return(output);
		}
	function asterisk(krl)
		{
			if (krl=="peus"||krl=="pclt"||krl=="pgmc"||krl=="pslv"||krl=="pie"||krl=="psmt"||krl=="purl") return("*");
			else return("");
		}
	function cleanSearch()
		{
			document.getElementById("searchinputvalue").value="";
			var rv="";
			var radios=document.getElementsByName("search_destination");
			for(var i=0;i<radios.length;i++)
			{
				if (radios[i].checked) rv=radios[i].value;
			}
			if (rv=="eng") searchenglish=true;
			else searchenglish=false;
			setWordlist();
		}
	function refreshOrder()
		{
			var rv="";
			var radios=document.getElementsByName("lex_order");
			for(var i=0;i<radios.length;i++)
			{
				if (radios[i].checked) rv=radios[i].value;
			}
			if (rv=="alph") orderalph=true;
			else orderalph=false;
			loadStage(activestage);
		}
	function adjStem(stem,decpattern)
		{
			var ptn=dbase[decpattern-1][1];
			if (activestage>1)
			{
				if (ptn.includes("AA")) stem=stem.replace("0-","1-");
			}
			return(stem);
		}
	function parseLoan(arg0,arg1)
		{
			var tt=getLangName(arg0[0].replace("L",""))+" ";
			var rv=arg0[1].split("/");
			var ts=rv[0].split("=");
			
			if (ts.length==1) tt+='<i>'+ts[0]+'</i> ("'+rv[1]+'")'; //No romanisation necessary
			else tt+=ts[0]+' (<i>'+ts[1]+'</i>, "'+rv[1]+'")';
			
			tt+=" prior to "+arg1;
			
			return(tt);
		}
	function parseEtymoText(txt)
		{
			var newtxt="";
			var barray=txt.split(" ");
			for(var i=0;i<barray.length;i++) //Do links
			{
				if (i>0) newtxt+=" ";
				if (barray[i].includes("@"))
				{
					//It's a link!
					var addtoend="";
					if (barray[i].substr(-1)=="."||barray[i].substr(-1)==","||barray[i].substr(-1)=="?"||barray[i].substr(-1)==")")
					{
						addtoend=barray[i].substr(-1);
						barray[i]=barray[i].substring(0,barray[i].length-1);
					}
					newtxt+=formatCognate(barray[i].split("@"))+addtoend;
				}
				else newtxt+=barray[i];
			}
			txt=newtxt;
			//Cases
			for(var i=0;i<glossterms.length;i++) txt=replaceAll("$"+glossterms[i][0],glossText(glossterms[i][0],glossterms[i][1]),txt);
			//Sources
			for(var i=0;i<sources.length;i++)
			{
				var tempvar=sources[i][1].split(",");
				txt=replaceAll("¬ß"+sources[i][0],"<span class='hovertext' data-placement='top' title='"+sources[i][1].replace(/<\/?i>/g,"")+".' data-toggle='tooltip'>"+tempvar[0]+" ("+tempvar[tempvar.length-1].trim()+")</span>",txt);
			}
			return(txt);
		}
	function glossText(txt,hover)
		{
			return("<span class='glosstext' data-placement='top' title='"+hover+"' data-toggle='tooltip'>"+txt+"</span>");
		}
	function returnGloss(txt)
		{
			for(var i=0;i<glossterms.length;i++) if (txt==glossterms[i][0]) return(glossterms[i][1]);
			return("<error>");
		}
		
		$('input[type=radio][name=use_xsampa]').change(function() {
		    if (this.value=='ipa') usexsampa=false;
			else usexsampa=true;
			openWord(_last_opened,false);
		});
		
	function switch_tab(tabid)
		{
			document.getElementById("head_container_lexicon").style.display="none";
			document.getElementById("head_container_docu").style.display="none";
			document.getElementById("head_container_bib").style.display="none";
			if (tabid>0) document.getElementById("lang_name").innerHTML="CARITE";
			switch(tabid)
			{
				case 0:
					document.getElementById("head_container_lexicon").style.display="inherit";
					document.getElementById("lang_name").innerHTML=stagelist[_currentstage][0].toUpperCase();
					break;
				case 1:
					document.getElementById("head_container_docu").style.display="inherit";
					prepDoc();
					break;
				case 4:
					document.getElementById("head_container_bib").style.display="inherit";
					render_bibliography();
					break;
			}
		}
		
	function render_bibliography()
		{
			if (!_has_rendered_bibliography)
			{
				_has_rendered_bibliography=true;
				//Make a new temporary array with all sources plus amount of references
				var sourcelist=[];
				for(var i=0;i<sources.length;i++) sourcelist.push([sources[i][0],0]);
				//Go through document to sum up references
				for(var i=4;i<dbase.length;i++)
				{
					var refre=dbase[i][sourcecolumn];
					if (refre!="")
					{
						var toarray=refre.split(",");
						for(var j=0;j<toarray.length;j++)
						{
							var kolo=(toarray[j].split(" "))[0];
							var found=false;
							for(var k=0;k<sourcelist.length;k++)
							{
								if (sourcelist[k][0]==kolo)
								{
									sourcelist[k][1]++;
									found=true;
								}
							}
							if (!found&&kolo.charAt(0)!=">") console.log("Unable to recognise "+kolo+" in "+i+"!");
						}
					}
				}
				var newlist=[];
				var newlist2=[];
				for(var i=0;i<sourcelist.length;i++)
				{
					if (sourcelist[i][1]>0) newlist.push(sourcelist[i][0]+" "+sourcelist[i][1]);
					else newlist2.push(sourcelist[i][0]);
				}
				inbibliography=true;
				var temp=list_sources(newlist);
				inbibliography=false;
				document.getElementById("bibliography_ollist").innerHTML=temp;
				temp=list_sources(newlist2);
				document.getElementById("bibliography_ollist2").innerHTML=temp;
			}
		}
		
	function list_sources(arraysource)
		{
			var qp=arraysource;
			var temp="";
			for(var i=0;i<sources.length;i++)
			{
				for(var j=0;j<qp.length;j++)
				{
					var ktk=qp[j].split(" ");
					if (sources[i][0]==ktk[0])
					{
						temp+="<li>"+sources[i][1]+".";
						if (ktk.length>1)
						{
							if (inbibliography)
							{
								temp+=" "+ktk[1]+" reference";
								if (ktk[1]!=1) temp+="s";
								temp+=".";
							}
							else
							{
								temp+=" Page";
								if (ktk[1].includes("-")||ktk[1].includes("+")) temp+="s";
								temp+=" "+replaceAll("+",", ",ktk[1])+".";
							}
						}
						temp+=" ";
						for(var k=0;k<sources[i][2].length;k++)
						{
							if (k>0) temp+=" ";
							temp+="<a target='_blank' href='"+sources[i][2][k][1]+"'>";
							switch(sources[i][2][k][0])
							{
								case "google": temp+="<i alt='Google' title='Google' class='fab fa-google'></i>";break;
								case "academia": temp+="<img alt='Academia' title='Academia' class='img_src_inline' src='logos/academia.svg'>";break;
								case "jstor": temp+="<img alt='JSTOR' title='JSTOR' class='img_src_inline' src='logos/jstor.png'>";break;
								case "worldcat": temp+="<img alt='WorldCat' title='WorldCat' class='img_src_inline' src='logos/worldcat.png'>";break;
							}
							temp+="</a>";
						}
						temp+="</li>";
					}
				}
			}
			return(temp);
		}
		
	function collapseIfMobile()
		{
			var q=getViewport();
			if (q=="sm"||q=="xs") $('#wordlist').collapse("toggle");
		}
		
		
		function getViewport () {
		  // https://stackoverflow.com/a/8876069
		  const width = Math.max(
		    document.documentElement.clientWidth,
		    window.innerWidth || 0
		  )
		  if (width <= 576) return 'xs'
		  if (width <= 768) return 'sm'
		  if (width <= 992) return 'md'
		  if (width <= 1200) return 'lg'
		  return 'xl'
		}
</script>
<script src="documentation.js"></script>
</html>